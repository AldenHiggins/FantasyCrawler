YUI.add('modal-mask',function(Y){Y.ModalMask=Y.Base.create('modal-mask',Y.Widget,[Y.WidgetStack],{initializer:function(config){this._show=this.constructor.superclass.show;this._hide=this.constructor.superclass.hide;},bindUI:function(){if(this.get('closeOnClick')){this.get('contentBox').on('click',Y.bind(this.close,this))}},syncUI:function(){this.get('boundingBox').setStyle('opacity',0);this.get('contentBox').setStyles({backgroundColor:this.get('color'),opacity:this.get('opacity')});this.setAttrs('zIndex',10000);if(this.get('visible')){this.show();}
else{this._hide();}},show:function(){var bb=this.get('boundingBox'),show=Y.bind(this._show,this);bb.setStyles({opacity:this.get('visible')?bb.getStyle('opacity'):0,backgroundColor:this.get('color')}).removeClass(this.getClassName('hidden')).transition({opacity:this.get('opacity'),duration:this.get('duration')},function(){show();});},hide:function(){var hide=Y.bind(this._hide,this);this.get('boundingBox').transition({opacity:0,duration:this.get('duration')},function(){hide();});},close:function(){this.hide();this.fire('closed');},destructor:function(){this.get('boundingBox').remove();}},{ATTRS:{color:{value:'#000'},closeOnClick:{value:false},opacity:{value:0.7},duration:{value:0.5}}});},"3.3.0",{requires:['base-build','base','widget','widget-stack','node'],skinnable:true,group:'nfl'});;YUI.add("widget-node-builder",function(Y){var yNodeCreate=Y.Node.create,yObjectEach=Y.Object.each,yLangIsFunction=Y.Lang.isFunction;function nodeSetAttrs(value,key){this.setAttribute(key,value);}
function WidgetNodeBuilder(){}
WidgetNodeBuilder.prototype.buildNode=function(config){var cfg=config||{},node=yNodeCreate(cfg.template||"<div></div>");if(cfg.className){node.addClass(yLangIsFunction(this.getClassName)?this.getClassName(cfg.className):cfg.className);}
if(cfg.attrs){yObjectEach(cfg.attrs,nodeSetAttrs,node);}
if(cfg.content){node.setContent(cfg.content);}
return node;};Y.WidgetNodeBuilder=WidgetNodeBuilder;},"3.4.1",{requires:["node-base"]});;(function(){var Constants=nfl.constants,EVENT_CLOSE='close',EVENT_COMPLETE='complete';YUI.add("modal-login",function(Y){"use strict";var getClassName=Y.ClassNameManager.getClassName;Y.namespace("NFL").ModalLogin=Y.Base.create("modal-login",Y.Widget,[Y.WidgetPosition,Y.WidgetPositionAlign,Y.WidgetStack,Y.WidgetNodeBuilder],{NAME:'modal-login',initializer:function(){var boundingBox,contentBox,mask,delegate,_this=this;if(Y.UA.android||!Modernizr.postmessage){boundingBox=this.get("boundingBox");boundingBox.setStyle("display","none");this.set("disabled",true);return;}
this.publish(EVENT_CLOSE,{broadcast:2});this.publish(EVENT_COMPLETE,{broadcast:2});this._eventHandlers=[];mask=this.get("mask");if(mask)this._mask=new Y.ModalMask(mask);contentBox=this.get("contentBox");if(contentBox){contentBox.appendTo(Y.one("body"));this._eventHandlers.push(contentBox.delegate("click",Y.bind("_onCloseClick",this),"."+(getClassName(this.NAME,'close'))));this._eventHandlers.push(contentBox.delegate("touchstart",Y.bind("_onCloseClick",this),"."+(getClassName(this.NAME,'close'))));this._closeButtonNode=this.buildNode({className:'close',template:'<div title="close">X</div>'});contentBox.append(this._closeButtonNode);this._iframeWrapperNode=this.buildNode({className:'iframe-wrapper',template:'<div></div>'});this._iframeNode=this.buildNode({className:'iframe',template:'<iframe frameBorder="0"></iframe>'});this._iframeWrapperNode.append(this._iframeNode);contentBox.append(this._iframeWrapperNode);this._eventHandlers.push(Y.on("resize",this._onResize,this));}
this.get("boundingBox").hide();delegate=_this.get('delegate');if(delegate){Y.use('node-event-delegate',function(){var container=Y.one(delegate.container),selector=delegate.selector;container&&_this._eventHandlers.push(container.delegate(Modernizr.touch?'touchstart':'click',Y.bind(_this._loadiFrame,_this),selector,_this));});}else{return Y.Array.each(this.get("linkNodes"),function(linkNode){linkNode=Y.one(linkNode);if(linkNode){_this._eventHandlers.push(linkNode.on("click",Y.bind(_this._loadiFrame,_this)));return _this._eventHandlers.push(linkNode.on("touchstart",Y.bind(_this._loadiFrame,_this)));}});}},load:function(href){if(href){var idx=href.indexOf('?'),qs=idx!=-1&&Y.QueryString.parse(href.substr(idx+1));if(qs&&qs.returnTo)this._returnTo=qs.returnTo;this._addMessageListener();this._iframeNode.setAttribute("src","");this._iframeNode.setAttribute("src",href);var mask=this.get("mask");if(mask){this._mask.render();this._mask.show();this.set("zIndex",this._mask.get("zIndex")+1);}
this.get("boundingBox").show();return this.centered();}},_onResize:function(event){return this.centered();},_onCloseClick:function(event){this._mask.hide();this._returnTo=null;this.get("boundingBox").hide();this._removeMessageListener();this.fire(EVENT_CLOSE);},_loadiFrame:function(event){var currentTarget,href;event.preventDefault();currentTarget=event.currentTarget;href=currentTarget.getAttribute("href");this.load(href);},_oniFrameMessage:function(event){var boundingBox,data,messageEvent,w,windowHeight,windowWidth;messageEvent=event._event;if(messageEvent.origin===Constants.ID_MANAGER){console.info("Message event",event);try{boundingBox=this.get("boundingBox");data=Y.JSON.parse(messageEvent.data);data=Y.mix(data,{width:boundingBox.get("offsetWidth"),height:boundingBox.get("offsetHeight"),reloadParent:false});w=this;if(data.reloadParent){console.info("ModalLogin -> Reloading parent page");this.fire(EVENT_COMPLETE,{data:data});if(this._returnTo&&this._returnTo!=window.location.href){window.location.href=this._returnTo.split('#')[0];}else{window.location.reload();}
return;}else if(data.parentUrl){console.info("ModalLogin -> Updating the parent URL page");window.location.href=data.parentUrl;return;}
windowWidth=Y.one("body").get("winWidth");windowHeight=Y.one("body").get("winHeight");if(windowWidth<data.width)data.width=windowWidth-100;return boundingBox.transition({duration:0.50,width:""+data.width+"px",height:""+data.height+"px"},function(){if(data.formValidation&&!Y.UA.mobile){w.centered();}else if(!data.formValidation){w.centered();}
if(boundingBox.getY()<40){boundingBox.setStyle("position","fixed");boundingBox.setY(40);return boundingBox.setStyle("position","absolute");}});}catch(error){return console.error("Error parsing message event from ID Manager",error);}}},_onKeyup:function(event){if(event.keyCode===27)return this._onCloseClick();},_onOrientationChange:function(event){var boundingBox;console.info("Modal Login -> Got orientation change. Trying to adjust modal login window position.");boundingBox=this.get("boundingBox");this.centered();boundingBox.setStyle("position","fixed");boundingBox.setY(40);boundingBox.setStyle("position","absolute");if(this._orientationChangeTimer){this._orientationChangeTimerCounter++;if(this._orientationChangeTimerCounter>5){this._orientationChangeTimer.cancel();this._orientationChangeTimer=null;}}else{this._orientationChangeTimerCounter=0;return this._orientationChangeTimer=Y.later(1000,this,this._onOrientationChange,[],true);}},_addMessageListener:function(){this._removeMessageListener();this._messageHandler=Y.one(window).on("message",Y.bind(this._oniFrameMessage,this));},_removeMessageListener:function(){this._messageHandler&&this._messageHandler.detach();},bindUI:function(){if(this.get("disabled"))return;try{this._eventHandlers.push(Y.one(window).on("resize",Y.bind(this._onResize,this)));this._eventHandlers.push(Y.one(window).on("orientationchange",Y.bind(this._onOrientationChange,this)));return this._eventHandlers.push(Y.one(document).on("keyup",Y.bind(this._onKeyup,this)));}catch(error){return console.warn("Error binding event handlers for modal login",error);}},destructor:function(){if(this._maskVisibleHandler)this._maskVisibleHandler.detach();if(this._mask)this._mask.destroy();Y.Array.each(this._eventHandlers,function(handler){return handler.detach();});this._messageHandler&&this._messageHandler.detach();return this.get("boundingBox").remove();}},{ATTRS:{mask:{value:{color:"#000",opacity:0.7,visible:false,zIndex:10000},lazyAdd:false,writeOnce:true},linkNodes:{value:[],writeOnce:true,lazyAdd:false},delegate:{value:null,writeOnce:true,lazyAdd:false}}});},"0.0.1",{requires:['base-build','base','widget','widget-position','widget-position-align','widget-stack','modal-mask','widget-node-builder','event-touch','json-parse','querystring-parse','transition'],skinnable:Constants.NFL_COMBO_ENABLED?true:false});return true;}).call(this);;YUI.add('nfl-template-plugin',function(Y){var $L=Y.Lang,DATA_RE=/ data\-(href|src|action|style)="([^"]*)"/g,DATA_REPLACE=' $1="$2"',PROTOTYPE_RE=/#\{([^\}\.]+)(?:\.([^\}]+))?\}/g,YUI_REPLACE="{$1 $2}";function getNested(field,value,meta){var fields,obj,i,l,temp;if(!(meta&&$L.isObject(value))){return value;}
fields=meta.split('.');obj=value;for(i=0,l=fields.length;i<l;i=i+1){temp=fields[i];if($L.isUndefined(obj[temp])){return'';}
obj=obj[temp];}
return obj;}
function prototypeTemplate(string){return string.replace(DATA_RE,DATA_REPLACE).replace(PROTOTYPE_RE,YUI_REPLACE);}
function noProcessing(string){return string;}
Y.namespace('NFL').TemplatePlugin=Y.Base.create('nfl-template',Y.Plugin.Base,[],{initializer:function(config){var host=this.get('host'),html=host.get('innerHTML');host.setContent('');this.set('originalHTML',html);if(config.processor){this.set('processor',config.processor);}
this.set('pattern',config.pattern?config.pattern:this.get('processor')(html));},update:function(obj){this.get('host').setContent(Y.substitute(this.get('pattern'),obj,this.get('manipulator')));},destructor:function(){this.get('host').setContent(this.get('originalHTML')).setStyle('display','none');}},{NS:'template',MANIPULATE_GET_NESTED:getNested,PROCESS_PROTOTYPE_TEMPLATE:prototypeTemplate,NO_PROCESSING:noProcessing,ATTRS:{pattern:{value:'',validator:$L.isString},originalHTML:{value:'',validator:$L.isString},processor:{value:prototypeTemplate,validator:$L.isFunction},manipulator:{value:getNested,validator:$L.isFunction}}});},"3.1.1",{requires:['node','substitute','plugin','base-build']});;YUI.add('nfl-fantasy-myteams',function(Y){var TemplatePlugin=Y.NFL.TemplatePlugin,FantasyMyTeams,User=Y.NFL.User;FantasyMyTeams=Y.Base.create('nfl-fantasy-myteams',Y.Base,[],{_afterStateChange:function(event){var container=Y.one(this.get('container'));if(container){container.removeClass(FantasyMyTeams.STATE_CLASSES[event.prevVal]);container.addClass(FantasyMyTeams.STATE_CLASSES[event.newVal]);}},initializer:function(config){var user=User.getCurrent(),cookieData;this.set('user',user);this.set('fancookie',Y.Cookie.get('ff'));this.set('container',config.container);this.set('json',{});this._stateChangeHandler=this.after('stateChange',this._afterStateChange,this);this.set('state','LOGGED_OUT');if(user&&this.get('fancookie')==null){this.set('json.user',user.getAttrs());this._userFantasyDataHandler=user.on(Y.NFL.User.FANTASY_DATA,this._onFantasyUserData,this);}else if(user&&this.get('fancookie')!=null){this.set('json.user',user.getAttrs());cookieData=Y.NFL.User.parseFantasyCookie();this._onFantasyUserData(cookieData);}},_onFantasyUserData:function(json){var leagues={},limit=this.get('limit'),Constants=nfl.constants,state,l,len,league,total=0,node;if(json){len=json.leagues.length;if(len){for(l=0;l<len&&l<=limit;l=l+1){total+=1;league=json.leagues[l];league.index=total;league.leagueLink='<a href="'+Constants.FANTASY_DOMAIN+'/league/'+league.id+'">'+league.name+'</a>';league.teamLink='<a href="'+Constants.FANTASY_DOMAIN+'/league/'+league.id+'/team/'+league.team.id+'">'+league.team.name+'</a>';leagues['league'+total]=league;}}
len=json.autopicks.length;if(total<limit&&len){for(l=0;l<len&&total<=limit;l=l+1){total+=1;league=json.autopicks[l];league.index=total;league.leagueLink='Autopick Team';league.teamLink='<a href="'+Constants.FANTASY_DOMAIN+'/autopick/'+league.id+'">'+league.name+'</a>';leagues['league'+total]=league;}}}
leagues.total=total;this.set('json.leagues',leagues);state=total===0?'NO_TEAMS':'SIGNED_IN';node=Y.one(FantasyMyTeams.STATE_NODES[state]);node.plug(TemplatePlugin);node.template.update(this.get('json'));if(total<limit){node.addClass('teams-'+total);}
else if(json.leagues.length+json.autopicks.length<limit){node.addClass('more-teams');}
this.set('node',node);this.set('state',state);},destructor:function(){this.get('node').unplug(TemplatePlugin);this._userFantasyDataHandler.detach();}},{ATTRS:{container:{value:null},state:{value:null},json:{value:null},fancookie:{value:null},user:{value:null},limit:{value:3},node:{value:null}},STATE_CLASSES:{'LOGGED_OUT':'signed-out','SIGNED_IN':'signed-in-teams','NO_TEAMS':'signed-in-no-teams','CLOSED':'signed-in-closed'},STATE_NODES:{'LOGGED_OUT':'.nv-fantasy-signed-out','SIGNED_IN':'.nv-fantasy-signed-in-teams','NO_TEAMS':'.nv-fantasy-signed-in-no-teams','CLOSED':'.nv-fantasy-signed-in-closed'}});Y.namespace('NFL.Fantasy').MyTeamsFantasyNavBox=FantasyMyTeams;},"3.1.1",{requires:['nfl-template-plugin','nfl-user','base']});