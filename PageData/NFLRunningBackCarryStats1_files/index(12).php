YUI.add('nfl-omniture',function(Y){var GlobalEnv=YUI.namespace('Env.NFLOmnitureTracking'),CLICK='click',body,OmnitureTracking,YObject=Y.Object,YLang=Y.Lang,CLICK_NAME_ATTRIBUTE='data-clickname';OmnitureTracking=Y.Base.create('nfl-omniture',Y.Base,[],{linkTrackVars:function(name,obj){OmnitureTracking.linkTrackVars(name,obj);}},{CLICK_NAME_ATTRIBUTE:CLICK_NAME_ATTRIBUTE,linkTrackVars:function(n,o){console.log('linkTrackVars()',n,o);var keys=[],values=[],name=n,obj=o,ltv=s_analytics.linkTrackVars;if(YLang.isObject(n)){obj=name;name='';}
if(s_analytics){YObject.each(obj,function(value,key){s_analytics[key]=value;keys.push(key);values.push(value);});s_analytics.linkTrackVars=keys.join(',');s_analytics.tl(true,'o',name||values.join(','));s_analytics.linkTrackVars=ltv;YObject.each(obj,function(value,key){s_analytics[key]='';});}},trackLinkVars:function(value){this.trackLink(true,'o',value,{prop35:value});},trackLink:function(d,t,n,o){console.log('trackLink()',o);if(Y.Lang.isObject(o)){o.linkTrackVars=Y.Object.keys(o).join(',');if(o.events){o.linkTrackEvents=o.events;}}
if(s_analytics){s_analytics.tl(d,t,n,o);}},trackPageLoad:function(o){console.log('trackPageLoad()',o);if(Y.Lang.isObject(o)){o.linkTrackVars=Y.Object.keys(o).join(',');if(o.events){o.linkTrackEvents=o.events;}}
if(s_analytics){s_analytics.t(o);}},getS:function(){return Y.config.win.s||s_analytics;},getInstance:function(){Y.error('Y.NFL.OmnitureTracking is now a static class, no need to call getInstance()');return new OmnitureTracking();}});if(!GlobalEnv.initialized){GlobalEnv.initialized=true;body=Y.one(Y.config.doc.body);GlobalEnv.clickNameHandler=Y.delegate(CLICK,function(event){if(event.button!==1){return;}
OmnitureTracking.linkTrackVars({prop35:event.currentTarget.getAttribute(CLICK_NAME_ATTRIBUTE)});event._nflOmnitureTracked=true;},body,'['+CLICK_NAME_ATTRIBUTE+']');GlobalEnv.externalClickHandler=Y.delegate(CLICK,function(event){var link=event.currentTarget,m,attrs={},keys=["pos","id","module"];if(event._nflOmnitureTracked||event.button!==1||event._event.returnValue===false){return;}
m=link.get("href").match(/(?:\?|&)module=([^#&]+)/);if(m){attrs.module=m[1];m=link.getAttribute("name").match(/&l(id|pos)=([^&]+)&l(id|pos)=([^&]+)/);if(m){attrs[m[1]]=m[2];attrs[m[3]]=m[4];}}else{Y.Array.each(keys,function(key){var attr="data-tracking-"+key,el=link.ancestor("["+attr+"]",true);if(el){attrs[key]=el.getAttribute(attr);}});}
if(Y.Object.keys(attrs).length===keys.length){s_analytics.c_w('SC_NFLLINKS',[attrs.id,attrs.pos,attrs.module].join("|"));}},body,'a[href]');Y.on('unload',function(){GlobalEnv.clickNameHandler.detach();GlobalEnv.externalClickHandler.detach();});}
Y.namespace('NFL').OmnitureTracking=OmnitureTracking;},"3.3.0",{requires:['base','node','event-delegate']});