window.ucs||(window.ucs={}),window.ucs.UH_MAIN_ID||(window.ucs.UH_MAIN_ID="#yucs"),window.ucs.ymreqid||(window.ucs.ymreqid=function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c}),window.ucs._sendBeacon||(window.ucs._sendBeacon=function(a){var b=new Image;b.height=0,b.width=0,b.style.display="none",b.src="https://geo.yahoo.com/t"+a,document.body.appendChild(b)}),window.ucs.YObj||(window.ucs.YObj=function(){var a=document.getElementById("yucs");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}());YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(){function b(a){return d(a)?function(b){delete YUI.Env.JSONP[c],a.apply(e.context,[b].concat(e.args))}:null}if(!this._config.on.success)return this;var c=a.guid().replace(/-/g,"_"),e=this._config,f=e.format.call(this,this.url,"YUI.Env.JSONP."+c);return YUI.Env.JSONP[c]=b(e.on.success),a.Get.script(f,{onFailure:b(e.on.failure),onTimeout:b(e.on.timeout||e.on.failure),timeout:e.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(a){if(a.namespace("ucs"),!a.ucs.MenuUtils){var b='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></li>{separatorBottom}',c='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></li>{separatorBottom}',d='<span class="separator" role="presentation"></span>',e="click",f="a",g="role",h="tabIndex",i="yucs-hide",j="iframe",k="ul",l="li",m="parentNode",n="http://l.yimg.com/a/lib/ush/icon.gif",o="https://s.yimg.com/lq/lib/ush/icon.gif",p=300;a.ucs.MenuUtils=function(a,b){var c=b&&b.panelSelector||k;this.menu=a,this.enableClick=b&&b.enableClick,this.panel=this.menu.one(c),this.panel&&this.init(),this.openDelay=b&&"undefined"!=typeof b.openDelay?b.openDelay:p,this.closeTimer=null,this.overPanel=!1,this.overLink=!1},a.ucs.MenuUtils.prototype={init:function(){this.keyedup=!1,this.menu.on("hover",a.bind(this._handleMenuEnter,this),a.bind(this._handleMouseOut,this),this),this.panel.on("hover",a.bind(this._handlePanelEnter,this),a.bind(this._handlePanelLeave,this),this),this.enableClick&&this.menu.on("click",a.bind(this._handleMenuToggle,this),this),this.menu.delegate(e,this._handleMenuItemClick,"li a",this),this.menu.on("keyup",this._handleKeyup,this),this.menu.on("keydown",this._handleKeydown,this),this.menu.removeClass("yucs-activate"),this._initAria()},_initAria:function(){this.menu.one(f).set(g,"button"),this.panel.all(f).set(g,"menuitemradio"),this.panel.set(g,"menu"),this.panel.all("div,ul,li").set(g,"presentation"),a.UA.ipad||a.UA.mobile||this.panel.set(h,-1),this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:f,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(a){return a.get(m)}},circular:!0})},_refreshAria:function(){this.focusmanager.focusManager.refresh()},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager),this.panel.one(f).set(h,0)},_handleMenuClick:function(a){this.overLink&&this.panel.hasClass(i)&&(this._accessShowMenu(a),this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null))},_handleMenuEnter:function(b){b.halt(),this.overLink=!0,a.later(this.openDelay,this,this._handleMenuClick)},_handlePanelEnter:function(){this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.overPanel=!0},_handlePanelLeave:function(){this.overPanel=!1,this.panelShown&&this._handleMouseOut()},_handleMenuToggle:function(){this.overLink=this.overLink?!1:!0,this.panelShown?(this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))):a.later(this.openDelay,this,this._handleMenuClick)},_handleKeyup:function(a){27===a.keyCode?(this.menu.one(f).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(f).focus(),this.keyedup=!0)},_handleKeydown:function(a){this.panel.hasClass(i)||a.stopPropagation(),40===a.keyCode&&a.preventDefault()},_handleDocumentClick:function(a){return this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||a.target===this.menu.one(">a")||a.target.get("parentNode")===this.menu.one(">a")?void(this.skipBlur=!0):void this._hideMenu()},_accessShowMenu:function(b){this._hideAllMenus(),this._showMenu(b),this.panel.focus(),a.Node.DOM_EVENTS.touchend=!0,this.documentBlurHandle=a.on("blur",function(a){var b=this;this.panel.contains(a.target)||a.target._node===this.panel._node||this.panel.hasClass(i)||(this.skipBlur||(this.timeout=setTimeout(function(){b._hideMenu()},50)),this.skipBlur=!1)},this.panel,this),this.documentFocusHandle=a.on("focus",function(a){this.timeout&&this.panel.hasChildNodes(a.target)&&(clearTimeout(this.timeout),this.timeout=null)},this.panel,this)},_showMenu:function(){this.panel.removeClass(i),this._addIframeShim();var a=this.menu.one(j);a&&a.removeClass(i)},_position:function(){var a=this.menu.get("region");this.panel.hasClass("yucs-menu-right")||this.panel.hasClass("yucs-menu-left")||this.panel.setStyle("left",a[0]),this.panel.setStyle("top",a[1]+13)},_handleMouseOut:function(){this.overLink=!1,this.closeTimer&&(this.closeTimer.cancel(),this.closeTimer=null),this.panel.hasClass(i)||(this.closeTimer=a.later(500,this,this._handleLeave))},_handleLeave:function(){this.overPanel||this.overLink||this._hideMenu()},_hideMenu:function(){this.panel.addClass(i),this.overPanel=!1;var a=this.menu.one(j);a&&a.addClass(i),this.documentBlurHandle&&this.documentBlurHandle.detach(),this.documentFocusHandle&&this.documentFocusHandle.detach(),this.documentClickHandle&&this.documentClickHandle.detach(),this.documentMouseDownHandle&&this.documentMouseDownHandle.detach(),this.documentTouchEndHandle&&this.documentTouchEndHandle.detach(),this.keyedup=!1},_hideAllMenus:function(){var b=a.all("yucs-menu iframe"),c=a.one("#yucs-top-menu");this._hideMenu(),c&&c.one("ul")&&(c.one("ul").addClass(i),a.one("#yucs-more").removeClass("yucs-menu-active")),b.addClass(i)},_addIframeShim:function(){var b,c=a.all("select"),d=a.UA.ie<=6;d&&0!==c.size()&&(b=this.menu.one(j),b||(b=document.createElement(j),b=this.panel.get(m).insertBefore(b,this.panel)),b.className="yucs-shim",b.setStyle("position","absolute"),b.setStyle("width",this.panel.getComputedStyle("width")),b.setStyle("height",this.panel.getComputedStyle("height")),b.setStyle("top",this.panel.getY()+"px"),b.setStyle("border","0px none"),this.menu.hasClass("yucs-help")||b.setStyle("left",0),b.frameBorder=0)},_addMenuGroups:function(a,b,c){for(var d=this.menu.one(k),e="",f=d.get("children")._nodes.length?!0:!1,g=0,h=a.length;h>g;g++){var i=a[g].length;"bottom"===b?a[g][0].separatorTop=!0:(h-1>g||f)&&(a[g][i-1].separatorBottom=!0),e+=this._addMenuGroup(a[g],c)}"bottom"===b?d.append(e):d.prepend(e)},_addMenuGroup:function(a,b){for(var c="",d=0,e=a.length;e>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass="debug-item"):(a[d].isDebugItem=!1,a[d].menuClass="minty-item"),c+=this._addMenuItem(a[d]);return c},_addMenuItem:function(d){var e="";switch(d.checkedAria=d.isActive?'aria-checked="true"':"",d.disabledAria=d.isDisabled?'aria-disabled="true"':"",d.actionType){case"link":e=a.substitute(b,d,this._processTemplateValue);break;case"customEvent":e=a.substitute(c,d,this._processTemplateValue)}return e&&(e=d.isDebugItem?e.replace(/separator/,"separator debug-item"):e.replace(/separator/,"separator minty-item")),e},_clearMenuItem:function(a){this.menu.one(k).all("."+a).each(function(a){a.remove(!0)})},_processTemplateValue:function(b,c,e){a.log("key = "+b+" value = "+c+" meta_data = "+e);var f="",g="https:"===document.location.protocol?o:n;switch(b){case"icon":void 0!==c&&(f="available"===c?'<img src="'+g+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+g+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+g+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+g+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+g+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(f=d);break;case"separatorBottom":c&&(f=d);break;case"actionData":c&&(f='data-mad="'+c+'"');break;case"isDisabled":c&&(f="disabled");break;case"isActive":c&&(f="sp active");break;case"checkedAria":f=c;break;default:f=c}return f},_resetItemStatus:function(a){var b,c=a.ancestor(k).all(l),d=a.ancestor(k).all("li.disabled");c.removeClass("sp active"),d.removeClass("disabled"),a.getAttribute("data-dis")&&(b=a.ancestor(l),b.addClass("disabled")),a.getAttribute("data-hs")&&(b=a.ancestor(l),b.addClass("sp active"))},_handleMenuItemClick:function(a){a.target}}}},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]}),function(){var a=document.getElementById("yucs");a&&window.ucs.YObj.use("node","ucs-menu-utils",function(a){var b=a.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(b){new a.ucs.MenuUtils(b)})})}();!function(){function a(a){switch(a){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"]}}function b(a){switch(a){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[e,g,f,g,d].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[f,g,e,g,c].join("");case"zh-hant-cn":case"zh-hant-tw":return[d,g,e,g,f].join("");default:return[f,g,e,g,d].join("")}}var c="%Y",d="%y",e="%m",f="%d",g="_",h=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";window.ucs||(window.ucs={}),window.ucs.getLocalDateFormat=function(c){c=c.toLowerCase();var d=a(c),e=b(c);return e.replace(new RegExp(g,"g"),d)},window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(h)}();window.ucs.YObj.use("datatype-date",function(){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one("#yucs"),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return s=/^en-us$/i.test(l),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?0===r?c=e+":"+f+" "+h:(/^th-th$/i.test(l)&&k.setFullYear(k.getFullYear()+543),c=a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"")):s?0===r?60>q?c=q>1?q+" secs ago":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+" min ago":q+" mins ago"):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+" hours ago":q+" hour ago"):c=864e5>g-m&&0!==r?"Yesterday "+e+":"+f+" "+h:t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=t[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative"),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))}},a.Global.on("ucs:themeChange",function(){a.later(11,this,function(){a.one("#animator")&&a.one("#animator").setStyle("display","none"),a.one("#yucs-logo-ani")&&(a.one("#yucs-logo-ani").setStyle("position","relative"),a.one("#yucs-logo-ani").setStyle("visibility","visible"),a.one(".lt #yucs-logo-ani")?a.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important"):a.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0% !important"))})}),a.Global.on("ucs:playLogo",function(){"undefined"!=typeof Aniden&&Aniden.play&&Aniden.play()}),a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){window.ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one("#yucs-logo");if(b){new a.ucs.LogoDebug(b)}})}();YUI.add("ucs-switch-theme",function(a){"use strict";a.namespace("ucs"),a.ucs.SwitchTheme=function(a){this.init(a)},a.ucs.SwitchTheme.prototype={init:function(a){this.container=a},_getTheme:function(){return this.container.hasClass("lt")?"light":"dark"},_setTheme:function(a){"light"===a?this.container.addClass("lt"):"dark"===a&&this.container.removeClass("lt")}}}),window.ucs.YObj.use("node","ucs-switch-theme",function(a){if(window.ucs.UhTheme){var b=a.one("#yucs");window.ucs.UhTheme=new a.ucs.SwitchTheme(b),window.ucs.UhTheme.getTheme=function(){return window.ucs.UhTheme._getTheme()},window.ucs.UhTheme.setTheme=function(a){return window.ucs.UhTheme._setTheme(a)}}});window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid"),style:b.getAttribute("data-style")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},style:function(){return a.Object.getValue(b.data,"style")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid(),style:b.style()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(a){function b(){b.superclass.constructor.apply(this,arguments)}a.namespace("Comet");var c={},d="comet:ready";a.initComet=function(e,f){var g=e.replace(/https:/,"http:");return"/"===g.substr(-1)&&(g=g.substring(0,g.length-1)),c[g]?a.log("init_comet: instance is already created. url="+g,"debug","Comet"):(a.log("init_comet: create instance. url="+g,"debug","Comet"),a.publish(d),c[g]=new b,c[g].clearListeners()),f&&c[g].addListener("/meta/handshake",f),c[g].initBayeux(e,function(b){b.successful&&a.fire(d,{message:b})}),c[g]},b.NAME="Comet",b.ATTRS={uri:{value:null,setter:function(a){if(null!==a){var b=window.location.protocol;-1!==b.indexOf("https")?a=a.replace(/http:/,"https:"):-1!==b.indexOf("http")&&(a=a.replace(/https:/,"http:"));var c=a.toLowerCase();return-1!==c.indexOf("https://")?this.set("protocol","https://"):-1!==c.indexOf("http://")&&this.set("protocol","http://"),a}}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}},a.extend(b,a.Base,{_clientState:"unconnected",_advice:{},_connected:!1,_config:{backoffIncrement:1e3,maxBackoff:1e4,maxNetworkDelay:3e5,delayedSendMaxCount:10,advice:{timeout:6e4,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5e3}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:!1,_isSendingQueue:!1,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new a.AsyncQueue,_ioQueue_c2s:a.io.queue,_ioQueue_s2c:a.io.queue,_jsonp:null,_listeners:{},initializer:function(){this.setClientState("unconnected"),a.on("beforeunload",a.bind(function(){"unconnected"!==this.getClientState()&&this.disconnect()},this),window)},config:function(b,c){a.Object.setValue(this._config,b,c)},_Queue_send:function(b){var c=this;c._batch(b),c.getClientId()&&(c._isSendingQueue||c._outgoing.length<=0||(a.each(c._outgoing,function(a){a=c._patchMessage(a)}),c._IO_send(!0,c._outgoing),c._outgoing=[]))},_nextQueueSend:function(){this._Queue_send()},_IO_send:function(a,b){var c=this;if(c.get("uri"))if(a){if(c._isSendingQueue||!b)return;c._IO_Queue_Send(b)}else{if(!c.getClientId())return;if(c._isLongpollingConnect||!b)return;c._IO_Longpolling_Send(b)}},_IO_Queue_Send:function(b){a.log("io_queue: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,data:a.JSON.stringify(b),xdr:{credentials:!0},on:{success:function(d,e){try{a.log("io_queue: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_queue: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_queue: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_queue: e.start","debug","Comet"),c._isSendingQueue=!0},complete:function(){a.log("io_queue: e.complete","debug","Comet"),c._isSendingQueue=!1,c._nextQueueSend()}}});c._ioQueue_c2s.stop(),c._ioQueue_c2s(c.get("uri"),d),c._ioQueue_c2s.start()},_IO_Jsonp_Send:function(b){a.log("io_jsonp: ","debug","Comet"),a.log(b,"debug");var c=this;if(c.get("uri")){var d=c.get("uri")+"?callback={callback}",e=encodeURIComponent(a.JSON.stringify(b));d=d+"&data="+e,c._jsonp=new a.JSONPRequest(d,{on:{success:function(b){a.log("io_jsonp: e.success","debug","Comet"),a.log(b,"debug"),c._handleResponse(b)},timeout:function(d){a.log("io_jsonp: e.timeout","debug","Comet"),a.log(d,"debug"),c._handleFailure(b,"408:"+c._config.subscribe.jsonpTimeout+":jsonp timeout")},failure:function(){a.log("io_jsonp: e.failure","debug","Comet"),c._handleFailure(b,"500::jsonp failed")}},timeout:c._config.subscribe.jsonpTimeout}),c._jsonp.send()}},_IO_Longpolling_Send:function(b){a.log("io_longpolling: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,xdr:{credentials:!0},data:a.JSON.stringify(b),on:{success:function(d,e){try{a.log("io_longpolling: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_longpolling: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_longpolling: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_longpolling: e.start","debug","Comet"),c._isLongpollingConnect=!0},complete:function(){a.log("io_longpolling: e.complete","debug","Comet"),c._isLongpollingConnect=!1}}});c._ioQueue_s2c.stop(),c._ioQueue_s2c(c.get("uri"),d),c._ioQueue_s2c.start()},_handleResponse:function(b){if(a.log("handle_response:","debug","Comet"),a.log(b),void 0!==b&&null!==b){var c=this;a.each(b,function(a){c._updateAdvice(a.advice),a.originalURI=c._urlOrigin;var b=a.channel;switch(b){case"/meta/handshake":c._handshakeResponse(a);break;case"/meta/connect":c._connectResponse(a);break;case"/meta/disconnect":c._disconnectResponse(a);break;case"/meta/subscribe":c._subscribeResponse(a);break;case"/meta/unsubscribe":c._unsubscribeResponse(a);break;default:c._messageResponse(a)}})}},_updateAdvice:function(a){this._advice=a?this._mixin(!1,{},this._config.advice,a):this._config.advice},_handshakeResponse:function(b){var c=this;if(b.successful){c.setClientState("connected"),c._clientId=b.clientId,c._advice.VIP&&c.set("uri",c.get("protocol")+c._advice.VIP+"/comet"),c._notifyListeners("/meta/handshake",b),c._Queue_send();var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("handshake_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failHandshake(b)},_failHandshake:function(a){var b=this;b.setClientState("unconnected"),b._clientId=null,b._notifyListeners("/meta/handshake",a),b._notifyListeners("/meta/unsuccessful",a);var c="none"!==b._advice.reconnect;c?(b._increaseBackoff(),b._delayedHandshake()):b._disconnect(!1)},_delayedHandshake:function(){var a=this;this._delayedSend(function(){a._handshake()})},_subscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0||(this._subscribeChannel[a.subscription]=!0),a.ext["Comet-auth-token"]&&(this._token=a.ext["Comet-auth-token"]),this._notifyListeners("/meta/subscribe",a)):this._failSubscribe(a)},_failSubscribe:function(a){this._notifyListeners("/meta/subscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_connectResponse:function(b){var c=this;if(!c._isDisconnected())if(c._connected=b.successful,c._connected){c.setClientState("connected"),c._notifyListeners("/meta/connect",b);var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("connect_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failConnect(b)},_failConnect:function(a){var b=this;b._notifyListeners("/meta/connect",a),b._notifyListeners("/meta/unsuccessful",a);var c=b._isDisconnected()?"none":b._advice.reconnect;switch(c){case"retry":b._delayedConnect(),b._increaseBackoff();break;case"subscribe":b._delayedConnect(),b._increaseBackoff();break;case"handshake":b.setClientState("unconnected"),b._resetBackoff(),b._delayedHandshake();break;case"none":b._disconnect(!1)}},_delayedConnect:function(){var a=this;this._delayedSend(function(){a._connect()})},_disconnectResponse:function(a){a.successful?(this._disconnect(!1),this._notifyListeners("/meta/disconnect",a)):this._failDisconnect(a)},_failDisconnect:function(a){this._disconnect(!0),this._notifyListeners("/meta/disconnect",a),this._notifyListeners("/meta/unsuccessful",a)},_unsubscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0&&delete this._subscribeChannel[a.subscription],this._notifyListeners("/meta/unsubscribe",a)):this._failUnsubscribe(a)},_failUnsubscribe:function(a){this._notifyListeners("/meta/unsubscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_messageResponse:function(a){void 0===a.successful?a.data?this._notifyListeners(a.channel,a):this._notifyListeners("/meta/unsuccessful",a):a.successful?this._notifyListeners("/meta/publish",a):this._failMessage(a)},_failMessage:function(a){this._notifyListeners("/meta/publish",a),this._notifyListeners("/meta/unsuccessful",a)},_delayedSend:function(a){var b=this,c=b._advice.interval+b._backoff;if(b._config.maxBackoff<=b._backoff?b._delayedSendCount++:b._delayedSendCount=0,b._delayedSendCount>b._config.delayedSendMaxCount){var d=b.get("uri");if(b.set("uri",b._urlOrigin),d===b.get("uri"))return;b._resetBackoff(),b._delayedSendCount=0}b._queue.add({fn:a,timeout:c}),b._queue.run()},_handshakeFailure:function(a,b){this._failHandshake({successful:!1,failure:!0,channel:"/meta/handshake",request:a,advice:{reconnect:"retry",interval:this._backoff},error:b||"",ext:a.ext||{},id:a.id||""})},_connectFailure:function(a,b){this._connected=!1,this._failConnect({successful:!1,failure:!0,channel:"/meta/connect",request:a,advice:{reconnect:"retry",interval:this._backoff},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_disconnectFailure:function(a,b){this._failDisconnect({successful:!1,failure:!0,channel:"/meta/disconnect",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_subscribeFailure:function(a,b){this._failSubscribe({successful:!1,failure:!0,channel:"/meta/subscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_unsubscribeFailure:function(a,b){this._failUnsubscribe({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_messageFailure:function(a,b){this._failMessage({successful:!1,failure:!0,channel:a.channel,request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_handleFailure:function(a,b){var c,d,e;for(e=0;e<a.length;++e)switch(c=a[e],d=c.channel){case"/meta/handshake":this._handshakeFailure(c,b);break;case"/meta/connect":this._connectFailure(c,b);break;case"/meta/disconnect":this._disconnectFailure(c,b);break;case"/meta/subscribe":this._subscribeFailure(c,b);break;case"/meta/unsubscribe":this._unsubscribeFailure(c,b);break;default:this._messageFailure(c,b)}},_notifyListeners:function(a,b){this._notify(a,b),this._notify(a+"/*",b);var c=a.split("/"),d=c.length-1,e=0;for(e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&this._notify(f,b),this._notify(f,b)}},_notify:function(b,c){var d=this._listeners[b];d&&a.each(d,function(b){a.Lang.isFunction(b.listener)&&b.listener(c)})},_isDisconnected:function(){return"unconnected"===this._clientState},_resetBackoff:function(){this._backoff=0},_nextMessageId:function(){return++this._lastMessageId+""},_increaseBackoff:function(){this._backoff<this._config.maxBackoff&&(this._backoff+=this._config.backoffIncrement)},_createMessage:function(b,c){c=c||{};var d=(new Date).valueOf(),e=window.location.host,f=[],g=a.merge(this.get("ext").all,this.get("ext")[b],c.ext||{},{timestamp:d,host:e||""});switch(b){case"handshake":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b]));break;case"connect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}));break;case"subscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"unsubscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"publish":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),channel:c.channel,data:c.data}));break;case"disconnect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}))}return f},_handshake:function(a){var b=this;if("unconnected"===b.getClientState()){a&&a.listener&&b._addListener(a,!1),b._clientId=null,b._token=null,b.resetTokenHeader(),b._clearSubscriptions(),b._updateAdvice(b._config.advice);var c=b._createMessage("handshake",a);b._IO_send(!0,c),b.setClientState("connecting")}else if("connected"===b.getClientState()){var d={successful:!0,channel:"/meta/handshake",clientId:b._clientId,originalURI:b._urlOrigin};b._notifyListeners("/meta/handshake",d)}},_connect:function(a){var b=this;if("connected"===b.getClientState()&&!b._isLongpollingConnect){var c=b._createMessage("connect",a);b._IO_send(!1,c)}},_subscribeJSONP:function(a){if(a&&a.channel&&this.getClientId()&&(!this._subscribeChannel[a.channel]||this._subscribeChannel[a.channel]!==!0)){a.listener&&this._addListener(a,!0);var b=this._createMessage("subscribe",a);this._IO_Jsonp_Send(b)}},_unsubscribe:function(a){if(this.getClientId()&&(a&&a.channel&&this.removeListeners(a.channel),a&&a.channel)){var b=this._createMessage("unsubscribe",a);this._Queue_send(b)}},_disconnect:function(a){var b=this;if(a&&(b._ioQueue_c2s.stop(),b._ioQueue_s2c.stop()),b.setClientState("unconnected"),b._clientId=null,b._resetBackoff(),b._queue.stop(),b._outgoing.length>0){var c=b._outgoing;b._outgoing=[],b._handleFailure(c,"500::canceled after disconnect")}b._clearSubscriptions()},_patchMessage:function(a){return a.id||(a.id=this._nextMessageId()),a.clientId=this.getClientId(),"/meta/handshake"===a.channel&&delete a.clientId,a},_batch:function(){a.each(arguments,function(b){if(b&&a.Lang.isArray(b)){var c=0;for(c=0;c<b.length;++c)this._outgoing.push(b[c])}else b&&this._outgoing.push(b)},this)},_clearSubscriptions:function(){a.each(this._listeners,function(b){b&&a.each(b,function(a,b,c){a&&a.isSub&&c.splice(b)})}),this._subscribeChannel={}},_reDoSubscriptions:function(){a.each(this._subscribeChannel,function(a,b){a&&(this._subscribeChannel[b]=!1,this._subscribeJSONP({channel:b}))},this)},isDuplicatedListener:function(a,b){var c=0;for(c=0;c<b.length;++c){var d=b[c];if(d&&d.listener&&d.listener.toString()===a.toString())return!0}return!1},_addListener:function(b,c,d){b&&b.listener&&a.Lang.isFunction(b.listener)&&(this._listeners[b.channel]?(d||!this.isDuplicatedListener(b.listener,this._listeners[b.channel]))&&this._listeners[b.channel].push({listener:b.listener,isSub:c}):this._listeners[b.channel]=[{listener:b.listener,isSub:c}])},_mixin:function(a,b){var c,d,e=b||{};for(c=2;c<arguments.length;++c){var f=arguments[c];if(void 0!==f&&null!==f)for(d in f){var g=f[d],h=e[d];g!==b&&void 0!==g&&(e[d]=a&&"object"==typeof g&&null!==g?g instanceof Array?this._mixin(a,h instanceof Array?h:[],g):this._mixin(a,{},g):g)}}return e},destructor:function(){},getClientState:function(){return this._clientState},setClientState:function(a){this._clientState=a},getClientId:function(){return this._clientId},initBayeux:function(a,b){this._urlOrigin=a,this.set("uri",a),this._handshake({channel:"/meta/handshake",listener:b})},subscribe:function(a,b){this._subscribeJSONP({channel:a,listener:b})},unsubscribe:function(a){this._unsubscribe({channel:a})},disconnect:function(a){var b=this;if(a&&b._addListener({channel:"/meta/disconnect",listener:a},!1),"unconnected"!==b.getClientState()&&b.getClientId()){var c=b._createMessage("disconnect");b._Queue_send(c)}},publishMsg:function(a,b){if(a&&b){var c={channel:a,data:b},d=this._createMessage("publish",c);this._Queue_send(d)}},clearListeners:function(){this._listeners={}},addListener:function(b,c,d){d=d||!1,(c||!a.Lang.isFunction(c))&&this._addListener({channel:b,listener:c},!1,d)},removeListeners:function(a){this._listeners[a]&&delete this._listeners[a]},setUserInfo:function(a,b){if(a&&b){var c=this.get("ext");c.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:b}}},setUserInfoWithCookie:function(a){if(a){var b=this.get("ext");b.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:"Any Value"}}},setTokenHeader:function(a){if(a){var b=this.get("ioCfg");b.headers.Authorization="Basic token="+a}},resetTokenHeader:function(){var a=this.get("ioCfg");a.headers.Authorization="Basic token="},setYcaHeader:function(a,b){if(a){var c=this.get("ioCfg");c.headers["Yahoo-App-Auth"]=a}if(b){var d=this.get("ext");d.publish["Comet-opaque-id"]=b}}}),a.Comet=b},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(a){"use strict";a.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},c="connect",d="disconnect",e="message",f="error",g={};a.ucs.CometConn=function(a,f){this.app=a,this.env=f,this.comet=null,this.init(b[f][a]),this.publish(c),this.publish(d),this.publish(e)},a.ucs.CometConn.getConn=function(c,d){var e=null;if(a.config.debug=window.location.href.match(/debug_comet-conn=1/),d=d||"prod",window.location.href.match(/env=nonprod/)&&(d="nonprod"),a.log("get_conn: app="+c,"debug","CometConn"),a.Lang.isUndefined(d))throw new Error("getConn(): env is required.");if(a.Lang.isUndefined(c))throw new Error("getConn(): app is required.");if(!a.Object.hasKey(b,d))throw new Error("getConn(): cannot find config for env="+d);if(!a.Object.hasKey(b[d],c))throw new Error("getConn(): cannot find config for app="+c);return e=a.Lang.sub("{app}:{env}",{app:c,env:d}),a.Object.hasKey(g,e)?a.log("get_conn: instance is already created. key="+e,"debug","CometConn"):(a.log("get_conn: create instance. key="+e,"debug","CometConn"),g[e]=new a.ucs.CometConn(c,d)),g[e]},a.ucs.CometConn.prototype={counts:{},init:function(b){var c=this;a.log("init: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.comet=a.initComet(b.host),c.comet.addListener("/meta/handshake",a.bind(c.cbHandShake,c),!0),c.comet.addListener("/meta/subscribe",a.bind(c.cbSubscribe,c),!0),c.comet.addListener("/meta/unsubscribe",a.bind(c.cbUnsubscribe,c),!0),c.comet.addListener("/meta/connect",a.bind(c.cbConnect,c),!0),c.comet.addListener("/meta/disconnect",a.bind(c.cbDisconnect,c),!0),c.comet.addListener("/meta/unsuccessful",a.bind(c.cbUnsuccessful,c),!0),c.resetCounts()},extractMessage:function(a){return{clientId:a.clientId||"",channel:a.channel||"",timestamp:a.timestamp||"",error:a.error||""}},getComet:function(){return this.comet},getCounts:function(){return this.counts},resetCounts:function(){return this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}},this},isDisconnect:function(c){var d=this,e=!0;return c.successful===!1&&a.Object.hasKey(d.counts.unsuccessful,c.channel)&&(d.counts.unsuccessful[c.channel]++,d.counts.unsuccessful[c.channel]<b.counts_max.unsuccessful[c.channel]&&(e=!1)),e},cbHandShake:function(d){var e=this,g=null;if(a.log("cb_handshake: app="+e.app+", env="+e.env,"debug","CometConn"),a.log(d,"debug"),a.Object.hasKey(d,"originalURI"))g=d.originalURI;else{if(!a.Object.hasKey(d,"uri"))return void this.fire(f,"uri / originalURI is missing in the callback_handshake response.");g=d.uri}a.log("cb_handshake. uri="+g,"debug","CometConn"),g===b[this.env][this.app].host?d.successful?e.fire(c,d):e.fire(f,"cb_handshake. successful=false"):e.fire(f,"cb_handshake.uri is not found in config. uri="+g),d&&d.successful&&e.resetCounts()},cbSubscribe:function(b){var c=this;a.log("cb_subscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbUnsubscribe:function(b){var c=this;a.log("cb_unsubscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbConnect:function(b){var c=this;a.log("cb_connect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbDisconnect:function(b){var c=this;a.log("cb_disconnect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbUnsuccessful:function(b){var c=this;a.log("cb_unsuccessful: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.isDisconnect(b)&&c.getComet().disconnect()},cbSystemStatus:function(b){a.log("cb_system_status","debug","CometConn"),a.log(b,"debug"),b&&this.fire("message",b)},cbNotification:function(b){a.log("cb_notifications","debug","CometConn"),a.log(b,"debug"),b&&this.fire(e,b)},initSystemStatus:function(b){a.log("init_system_status. channel="+b,"debug","CometConn"),this.comet.subscribe(b,a.bind(this.cbSystemStatus,this))},initNotification:function(){a.log("init_notifications","debug","CometConn"),this.comet.subscribe("/UNP/alerts/*",a.bind(this.cbNotification,this))},emitBeacon:function(b){if(a.Lang.isObject(a.ucs)&&a.Lang.isObject(a.ucs.Beacon))switch(b.type){case"info":a.ucs.Beacon.info(b);break;case"error":a.ucs.Beacon.error(b)}}},a.augment(a.ucs.CometConn,a.EventTarget,!0,null,{emitFacade:!0,broadcast:2})},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});window.ucs&&window.ucs.YObj&&window.ucs.YObj.use("node","ucs-comet-conn",function(a){var b=null,c=null,d=null,e={};b=a.one("#yucs-meta").getAttribute("data-authstate"),c=a.one("#yucs-meta").getAttribute("data-property"),d=a.one("#yucs-notifications"),a.Lang.isObject(d)||("signedin"===b||"mail"===c)&&a.Lang.isFunction(a.ucs.CometConn)&&(e.notifications=a.ucs.CometConn.getConn("notifications"),e.notifications.on("connect",function(){e.notifications.initNotification()}))});YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b,c=!1,d=a.one("#yucs-disclaimer")?a.one("#yucs-disclaimer"):a.one("#yucs-disclaimer-md"),e=d.getAttribute("data-property"),f=(d.getAttribute("data-lang"),d.getAttribute("data-dss")),g=(d.getAttribute("data-cu"),d.getAttribute("data-cobrand"),!1),h=!1,i=(a.Cookie.get("DSS"),parseInt((new Date).getTime()/1e3),a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),j="false",k=navigator.userAgent.toLowerCase(),l=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),m=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),n=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/387/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/387/css/disclaimer-min.css",a.one("#yucs-disclaimer")?i=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(i=a.one("#yucs-disclaimer-md").getAttribute("data-device")),j=i&&(i.match(/smartphone/gi)||i.match(/tablet/gi)),"frontpage"===e&&(i.match(/smartphone/gi)||i.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),f&&"0"===f&&k.indexOf("version")>=0&&k.indexOf("crios")<0&&(b=k.match(/version\/(\d+)/),i.match(/desktop/gi)&&b&&b[1]&&parseInt(b[1])<8?this.loadCSS(this.cssPath,this.jsPath):j&&a.UA.ios&&a.UA.ios<8&&this.loadCSS(this.cssPath,this.jsPath)),n&&(n=n.replace('"',""),n=n.replace("'",""),n=parseInt(n)),m&&(m=m.replace('"',""),m=m.replace("'",""),m=parseInt(m)),l?(l=l.replace('"',""),l=l.replace("'",""),l=parseInt(l)):c=!0,c=!0,g=!0,n&&1===n&&g===!0&&h===!1&&(n=a.Cookie.get("AO",{raw:!0}),n=n.replace("o=1","o=0"),a.Cookie.set("AO",n,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(b,c){var d={onSuccess:function(){this.loadJS(c)},onFailure:function(){this.loadCSS(b)},context:this};a.Get.css(b,d)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(b){var c={onFailure:function(){this.loadJS(b)},context:this};a.Get.script(b,c)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-simple-menu",function(a){a.namespace("ucs.MoreMenu");var b="yucs-menu-active",c="role",d=">li>a",e="parentNode";a.ucs.MoreMenu=function(b){a.ucs.MoreMenu.superclass.constructor.call(this,b),b.removeClass("yucs-more-activate"),this.ylt=b.getAttribute("data-ylt"),this.topBar=a.one("#yucs-top-bar"),this._init()},a.extend(a.ucs.MoreMenu,a.ucs.MenuUtils,{_init:function(){this._position(),this._initAriaTopbar(),this._initEvents()},_initEvents:function(){this.menu.detach("hover"),this.panel.detach("hover"),a.one("#yucs-more-link").on("click",this._handleMenuClick,this),a.Global.on("ucs:menuNavShow",this._hideMenu,this)},_handleMenuClick:function(b){b.halt(),this.panel.hasClass("yucs-hide")?(this._showMenu(b),this.menu.removeClass("yucs-has-focus"),this.menu.one("a").blur(),this.documentClickHandle=a.one("body").on("click",this._handleDocumentClick,this),this.documentMouseDownHandle=a.one("body").on("mousedown",this._handleDocumentClick,this)):this._hideMenu()},_position:function(){var b=this.menu.get("region").height;b-=2,a.one("#yucs-top-menu").setStyle("top",b+"px")},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt)},_showMenu:function(){this.panel.hasClass("yucs-hide")&&(this._sendBeacon(),this.menu.addClass(b),a.ucs.MoreMenu.superclass._showMenu.apply(this,arguments))},_hideMenu:function(){a.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments),this.menu.removeClass(b)},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._handleMenuClick(a),this.panel.one("a").focus()),this.keyedup=!0)},_initAriaTopbar:function(){this.topBar&&(this.toolbar=a.one("#yucs-top-list"),this.toolbar.set(c,"toolbar"),this.toolbar.all(">li").set(c,"presentation"),this.toolbar.delegate("mouseenter",function(a){a.currentTarget.removeClass("yucs-has-focus")},">li"),this.fm=this.toolbar.plug(a.Plugin.NodeFocusManager,{descendants:d,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(a){return a.get(e)}},circular:!0}),this.panel.focusManager.get("descendants").after("keydown",function(a){9===a.keyCode&&(this.panel.focusManager.focus(0),this._hideMenu())},this),this.toolbar.focusManager.get("descendants").after("keyup",function(a){9===a.keyCode&&this.toolbar.focusManager.focus(0),27===a.keyCode&&(this.menu.one("a").focus(),this._hideMenu())},this))}})},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]}),function(){window.ucs.YObj.use("node","ucs-simple-menu",function(a){var b,c=a.one("#yucs-more.yucs-more-activate");c&&(b=new a.ucs.MoreMenu(c))})}();if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}YUI.add("ucs-search",function(d){var p={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "};if(!ucs.Search){var h="value",m="click",u="suggest",c="touchstart",t="submit",s="innerHTML",a="tabindex",f="target",o=20,b=10,e=parseInt(d.one("#yucs").getStyle("paddingLeft"),b),j="yucs-qry",n="yucs-content-qry",v="#yucs-satray",i=d.one("#yucs-debug"),r="#yucs-btn-delete",q="https://s.yimg.com/kx/yucs/uh3/search/593/js/mini-assist-min.js",l="https://s.yimg.com/kx/yucs/uh3/search/js/442/tray-align-plugin-min.js",g="https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",k="https://s.yimg.com/kx/yucs/uh3/search/css/434/assist-min.css";ucs.Search=function(w){if(typeof w.getDOMNode==="function"){this.form=(w.getDOMNode().nodeName.toLowerCase()==="form")?w:w.one("form");}else{this.form=w.one("form");}this.searchWrapper=d.one("#yucs-search");this.searchFormClass=d.one(".yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.yucs=d.one("#yucs");this.loadedAssist=false;this.property=d.one("#yucs").getData("property");this.cleanBtn=d.one(r);this.languagetag=d.one("#yucs").getAttribute("data-lang");this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){var C=this.property;var A=navigator.userAgent.toLowerCase();if(d.one(".enable_form_focus")&&C!=="mail"){if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}else{document.getElementById("mnp-search_box").focus();}}}else{if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}}}this.searchWrapper.removeClass("yucs-search-activate");this._setTabIndex();this.is2Button=(this.buttons.size()===2)&&!this.searchWrapper.hasClass("yucs-one_button");if(this.searchFormClass.getAttribute("data-webaction")){this.form.one("input").setAttribute("name","p");this.searchFormClass.setAttribute("action",this.searchFormClass.getAttribute("data-webaction"));d.one("#yucs-sprop_button").setAttribute("data-vsearch",d.one("#mnp-search_box").getAttribute("data-yltvsearch"));}if(this._hasPlaceholderSupport()&&!d.UA.ie){var z=document.getElementById("mnp-search_box");z.removeAttribute("data-sh");}if((C==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()&&!this.loadedAssist){this.loadedAssist=true;this._initAssist();}if((d.one("#yucs")&&d.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=d.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();var y=this.input.getAttribute("data-resize");if(!y||y==="enable"){this._initSizeControl();}this._initEventListeners();if(this.vertSearchBtn){this.vertSearchBtn.setAttribute("onclick","");}this.form.removeClass("yucs-activate");var x=document.URL,B=/[?&]p=([^&]+)/i,w=B.exec(x);if(w===null&&C==="help"){B=/[?&]question_box=([^&]+)/i;w=B.exec(x);}if(w!==null&&(C==="answers"||C==="help"||C==="shopping")){d.one(".yucs-search-input").setAttribute("value",decodeURIComponent(w[1].replace(/\+/g," ")));}if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}if(d.one("#search_hot_keyword_block")&&C!=="mail"){this._initHotKeyword();}else{if(d.one("#search_hot_keyword_block")&&C!=="mail"){d.one("#advanced-search").set("offsetWidth",d.one(".yucs-search-input").get("offsetWidth"));}}},html:function(w){return(w+"").replace(/[&<>"'\/`]/g,this._htmlReplacer);},_htmlReplacer:function(w){return p[w];},_initSizeControl:function(){this.oldYucsWidth=this.yucs.get("region").width;this.isRTL=/ar|he/gi.test(d.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftWrapper=d.one(".yucs-fl-left");this.rightWrapper=d.one(".yucs-fl-right");this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),b);this.IEOffset=0;if(d.UA.ie>0&&d.UA.ie<=7){this._calcIEOffset();}this._resizeSearchContainer(this.oldYucsWidth);d.on("windowresize",d.bind(this._handleWindowResize,this));},_hasPlaceholderSupport:function(){var w=document.createElement("input");return("placeholder" in w);},_initEventListeners:function(){var w=this.form.on(t,this._handleSubmit,this);this.input.on("keydown",this._handleInputKeypress,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);this.input.on("click",this._handleInputClick,this);if(this.stype){this._initSearchTypeMenu();}if(this.property==="mail"||this.is2Button){this.webSearchBtn.on(m,this._handleWebSearchClick,this);if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}if(d.UA.ie){w.detach();this.webSearchBtn.on(m,this._handleWebSearchClick,this);this.form.on(t,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});d.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);d.Global.on("ucs:mailSearch",this._trackMailSearch,this);
d.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}if(this.cleanBtn){this.cleanBtn.on("click",this._resetSearchInput,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(C){var y=this.stype.one(".yucs-active"),x=this.stype.one(".yucs-inactive"),A,w,z,B;C.preventDefault();if(parseFloat(YUI.version,10)>3.1){x.toggleView();}else{if(x.getStyle("display")=="none"){x.setStyle("display","block");}else{x.setStyle("display","none");}}if(C.target.hasClass("yucs-active")||C.target.hasClass("yucs-inactive")){z=y.getData("yucs-stype");B=C.target.getData("yucs-stype");if(z!=B){A=y.get("text");w=C.target.get("text");y.set("text",w);y.setData("yucs-stype",B);x.set("text",A);x.setData("yucs-stype",z);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(w){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(w){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var w=d.all(".yucs-fl-left > div"),y=e,z,x;w.each(function(A){if(A.get("id")!=="yucs-search"){y+=A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}else{y+=parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}});return y;},_calcIEOffset:function(){var x=d.all(".yucs-search-buttons").pop(),w=x.intersect(this.searchWrapper);if(d.one("body").getAttribute("dir")==="rtl"){this.IEOffset=w.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),b)-w.right;}this.defaultWidth+=this.IEOffset;},_handleWindowResize:function(){var w=this.yucs.get("region").width;if(w!==this.oldYucsWidth){this._resizeSearchContainer(w);this.oldYucsWidth=w;}},_setInputWidth:function(){var w=d.one(".yucs-form-input"),x=parseInt(this.input.getStyle("paddingLeft"))+parseInt(this.input.getStyle("paddingRight"))+parseInt(this.input.getStyle("borderLeftWidth"))+parseInt(this.input.getStyle("borderRightWidth"));this.input.setStyle("width",(w.get("region").width-x)+"px");},_resizeSearchContainer:function(z){var y=this.searchWrapper.get("region").width,x=this.rightWrapper.get("region").width+e,w=z-(this.leftWrapperWidth+x+o)+this.IEOffset;if(w>this.defaultWidth){if(y===this.defaultWidth){return;}else{w=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",w+"px");if(this.IEOffset>0&&this.isRTL){d.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var w=this.input.get(h);w=d.Lang.trim(w);return w;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(w){if(this._inputIsEmpty()){this._resetSearchInput();this._setCaretStart();}else{if(!this._inputIsDefaultTerm()){this._setTabIndex();}}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}this._showCleanBtn();},_handleInputClick:function(){if(this._inputIsDefaultTerm()){this._resetSearchInput();this._setCaretStart();}},_setCaretStart:function(){var y;if((y=window.document.selection)){if(y.type!="Control"){var w=this.input.get("value").length,x=y.createRange();x.move("character",-w);x.select();}}},_setTabIndex:function(){var w=(d.UA.ie>0&&d.UA.ie<=7);this.buttons.each(function(x){var y=x.getAttribute(a);if((w&&y===0)||(w&&y===65535)||(y&&!(w&&y===32768))){x.setAttribute(a,0);}else{x.setAttribute(a,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(f,"searchWin");}else{this.form.setAttribute(f,this.linkTarget);}},_initAssist:function(){var w=this.input.getAttribute("data-satype");switch(w){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(w){var x={searchbox:w,clid:"uh-yui3",align:true,shim:1,nresults:w.getAttribute("data-maxresults")||10};x.node=v;if(w.getAttribute("data-pubid")){x.pubid=w.getAttribute("data-pubid");}if(w.getAttribute("data-gosurl")){x.url=w.getAttribute("data-gosurl");}if(d.one("#yucs-sfilter")&&d.one("#yucsHead").hasClass("ua-ie")){x.tray={plugin:{align:"#yucs-input_wrap"}};}var y=parseInt(w.getAttribute("data-minlength"),10);if(!isNaN(y)){x.minLength=1;}return x;},_getUHB:function(){var w=d.one("#uhb");return w&&w.get("value")||"uhb2";},_initMiniAssist:function(y){var w=this,x={"miniassist":{fullpath:q,requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:k,type:"css"},"tray-align-plugin":{fullpath:l,requires:["miniassist"]},"tray-shim-plugin":{fullpath:g,requires:["miniassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move","escape",function(A){if(ucs.YObj.config.fetchCSS===false){A.Get.css(k);}var I=new A.Node(y),G=w._buildAssistConfig(I),E=A.one(v),C=E.getAttribute("data-vfr");w.sa=new A.Search.MiniAssist(G);if(!isNaN(G.minLength)){w.sa.assist.set("minLength",1);}w.sa.assist._checkValue();w.sa.gossip.set("scrollSize",13);w.sa.gossip.set("linkStem",E.getAttribute("data-vsearch"));if(A.one("#search_hot_keyword_block")){var K="",H="",z=A.one("#yucs").getData("property"),B=A.one("#yucs").getAttribute("data-lang");if("sports"===z&&B==="zh-hant-tw"){K="tw.sports.yahoo.com";}else{if("ivy"===z&&B==="zh-hant-tw"){H="hq";}else{if("omg"===z&&B==="zh-hant-hk"){K="hk.ent.yahoo.com";}else{if("finance"===z&&B==="zh-hant-hk"){K="hk.finance.yahoo.com";}else{if("lifestyles"===z&&B==="zh-hant-hk"){K="hk.lifestyle.yahoo.com";}}}}}if(K!==""){w.sa.gossip.set("linkParams",{fr:C,"vs":K});}else{if(H!==""){w.sa.gossip.set("linkParams",{fr:C,"ilk":H});
}else{w.sa.gossip.set("linkParams",{fr:C});}}}else{w.sa.gossip.set("linkParams",{fr:C});}if(!w.is2Button){w.sa.gossip.set("hideEmptyTray",false);}if(w.property==="finance"&&w.languagetag!=="zh-hant-hk"){var J=A.one(G.node),D=J.getAttribute("data-vstext"),F=J.getAttribute("data-vert_fin_search"),L=w._getUHB();w.sa.gossip.set("uhbParams",{uhb:L,fr:C});w.sa.assist.on(u,function(N){if(N.query){var M=A.one("#"+n),O=w.sa.buildSearchUrl(I,N.query,F,{fr:C});if(w.property==="finance"){O=O.replace("?s=","?p=");}if(!M){if(document.getElementById("hspart")){O+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){O+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){O+="&type="+document.getElementById("yucs-hstype").value;}M=A.Node.create("<ul id='"+n+"'><li><a id='searchVertical' href='"+O+"'>"+D+"<q>"+A.Escape.html(N.query)+"</q></a></li></ul>");A.one(".sa-panel").append(M);}else{M.one("li").setContent("<a  id='searchVertical' href='"+O+"' text='"+A.Escape.html(N.query)+"'>"+D+" <q>"+A.Escape.html(N.query)+"</q></a>");}}});}A.one(".yucs-search").on("submit",function(N){if(A.one("#"+j+" a.sa-active")){var M=A.one("#"+j+" a.sa-active").getAttribute("href");N.preventDefault();if(w.linkTarget==="_blank"||w.form.hasClass("yucs-search-fh")){window.open(M,"searchWin");}else{window.location.href=M;}}});});},_initRichAssist:function(y){var w=this,x={richassist:{fullpath:"https://s.yimg.com/lq/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(B){var z=new B.Node(y),A=w._buildAssistConfig(z);w.sa=new B.Search.RichAssist(A);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(w){w.preventDefault();this._toggleSearch();},_toggleSearch:function(){var w=this,x=function(y){w._handleBodyClick(y);};d.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(d.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){d.log("using touchstart in mobile browser","info","search");document.body.addEventListener(c,x,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(c,x,false);}}};}else{this.bodyClick=d.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=d.on("scroll",function(y){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(y){var x=y&&y.target||null,w;if(!x){return;}w=typeof x.ancestor==="function"?x:d.one(x);if(w&&!w.ancestor("#yucs")){this._toggleSearch();}},_handleWebSearchClick:function(w){this.isWebSearch=true;if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this.sa&&this.is2Button){this.sa.set("iswebsearch",true);}},_handleSubmit:function(x){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(x&&x.target){this.isWebSearch=d.one(x.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(f)!=="searchWin"){x.preventDefault();}var w=d.Node.create("<img />");w.once("load",this._handleImageLoad,this);w.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(d.bind(this._handleImageLoad,this),2000);w.set("src","https://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(w){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(f)!=="searchWin"){this.form.submit();}},_handleInputKeypress:function(z){var y=this._inputIsDefaultTerm(),x,w;if((z.keyCode===46||z.keyCode===8)&&y){z.preventDefault();return;}else{if(z.keyCode!==9&&z.keyCode!==13){if(y){this._setInputBlank();this.input.removeClass("yucs-search-hint-color");}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}}else{if(z.keyCode===13&&!y){this.enterButtonPressed=true;x=z.target.getAttribute("data-enter-fr");w=z.target.getAttribute("data-enter-ylt");if(w){this.form.setAttribute("action",w);}if(x){if(this.is2Button){this.vertSearchBtn.setAttribute("data-vfr",x);}else{this._setFrCode(x);}}}}}},_handleInputBlur:function(w){if(this._inputIsEmpty()){this._resetSearchInput();}},_handleVertSearch:function(C){d.log("handleVertSearch");if(this.isWebSearch||d.one("#"+j+" a.sa-active")){this.isWebSearch=false;return;}C.preventDefault();if(this._inputIsEmpty()){return;}var y=C.target.getAttribute("data-vsearch"),E="1button",A,w=this.property,x=this.languagetag,z=C.target.getAttribute("data-vfr"),F=this.input.getAttribute("data-enter-ylt");if(this.is2Button){E="2button";}if(!y){y=this.vertSearchBtn.getAttribute("data-vsearch");}if(this.enterButtonPressed&&F){y=F;}if(y&&w!=="mail"){A=y.split("?");if(A.length==1){A="";}else{y=A[0];A=A[1];}if(w==="finance"&&x!="zh-hant-hk"){y+="?uhb="+this._getUHB()+"&fr="+z+"&type="+E+"&s="+encodeURIComponent(this.input.get(h));if(d.one("#searchAll")&&d.one("#searchAll").hasClass("sa-active")){y=d.one("#searchAll").getAttribute("href");}if(d.one("#searchVertical")&&d.one("#searchVertical").hasClass("sa-active")){y=d.one("#searchVertical").getAttribute("href");}}else{if(w==="groups"){y+="?query="+encodeURIComponent(this.input.get(h));}else{if(w==="help"){this.helpForm=d.one("#landingSearch");if(!this.helpForm){this.helpForm=d.one("#question_form");}var B=this;if(this.helpForm){this.vsu="";var D=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(G){B.vsu+=G.getAttribute("name")+"="+G.getAttribute("value")+"&";
},B);y=this.helpForm.getAttribute("action");y+="?"+this.vsu+D+"="+encodeURIComponent(this.input.get(h));if(D!="question_box"){y+="&p="+encodeURIComponent(this.input.get(h));}}else{y+="?fr="+z+"&type="+E+"&query="+encodeURIComponent(this.input.get(h));}}else{if(x=="zh-hant-tw"&&(w=="omg"||w=="news"||w=="ivy")){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";if(w=="ivy"){y+="&ilk=hq";}}else{if(w=="sports"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8&vs=tw.sports.yahoo.com";}else{if(w=="omg"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.ent.yahoo.com&ei=UTF-8";}else{if(w=="finance"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.finance.yahoo.com&ei=UTF-8";}else{if(w=="news"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";}else{if(w=="lifestyles"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.lifestyle.yahoo.com&ei=UTF-8";}else{if(w=="money"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=tw.money.yahoo.com&ei=UTF-8";}else{if(z){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h));}else{y+="?type="+E+"&p="+encodeURIComponent(this.input.get(h));}}}}}}}}}}}if(A){y+="&"+A;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(y,"searchWin");}else{if(window!=window.top){window.top.location.href=y;}else{window.location.href=y;}}}else{this._fireVertSearchEvent(C);}},_fireVertSearchEvent:function(x){var w=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":w});},_handleWebSearchEvent:function(w){if(w.query){this.input.set("value",w.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){if(this.searchHint){this.input.addClass("yucs-search-hint-color");}this._hideCleanBtn();this.input.set(h,this.searchHint);},_setSearchInput:function(w){this.input.set(h,w);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(s);},_initHotKeyword:function(){var x=this.yucs.getAttribute("data-lang").split("-").pop(),y=d.one("#search_hot_keyword_block");var z={"title":" : ","count":8,"max_charaters":30,"data":"","url":"http://global.tts.search.yahoo.com/pulse.php","fr":this.vertSearchBtn.getAttribute("data-vfr"),"format":"json","intl":x,"type":"metro","src":"metro","order":"rank","retry":1,"project_id":0,"tracking_id":0,"host":"a.analytics.yahoo.com","colo":"","fr_code":"","spaceid":y.getData("spaceid"),"bucketid":y.getData("bucketid")};if("zh-hant-tw"===this.languagetag&&("news"===this.property||"omg"===this.property||"sports"===this.property||"ivy"===this.property||"mail"===this.property||"money"===this.property)){z.project_id=1167069579;z.tracking_id=10001167069579;z.host="y3.analytics.yahoo.com";z.colo="VSCALE4";if(z.fr==="tw_uh3_news_vert_1"){z.fr_code="tw_uh3_news_tts_1";}else{if(z.fr==="tw_uh3_news_vert_2"){z.fr_code="tw_uh3_news_tts_2";}else{if(z.fr==="tw_uh3_omg_vert_1"){z.fr_code="tw_uh3_omg_tts_1";}else{if(z.fr==="tw_uh3_sports_vert_1"){z.fr_code="tw_uh3_sports_tts_1";}else{if(z.fr==="tw_uh3_screen_vert_1"){z.fr_code="tw_uh3_screen_tts_1";}else{if(z.fr==="tw_uh3_mail_vert_1"){z.fr_code="tw_uh3_mail_tts_1";}else{if(z.fr==="uh3_money_vert"){z.url="https://tw.search.yahoo.com/tts";z.type="webttstw";z.fr_code="uh3_money_tts";}}}}}}}if("omg"===this.property||"ivy"===this.property){z.type="uh3omg";}}else{if("zh-hant-hk"==this.languagetag&&("omg"==this.property||"lifestyles"==this.property||"finance"==this.property||"news"==this.property||"mail"==this.property)){z.project_id=21324579;z.tracking_id=100021324579;z.host="y3.analytics.yahoo.com";z.colo="ONO";if(z.fr==="hkomg"){z.fr_code="hk_uh3_ent_tts_1";}else{if(z.fr==="hk_uh3_news_vert_1"){z.fr_code="hk_uh3_news_tts_1";}else{if(z.fr==="hk_uh3_finance_vert_1"){z.fr_code="hk_uh3_finance_tts_1";}else{if(z.fr==="hk_uh3_lifestyle_vert_1"){z.fr_code="hk_uh3_lifestyle_tts_1";}else{if(z.fr==="hk_uh3_mail_vert_1"){z.fr_code="hk_uh3_mail_tts_1";}}}}}if("news"==this.property||"finance"===this.property||"mail"===this.property){z.type="shine";}else{if("omg"===this.property||"lifestyles"===this.property){z.type="entertainment";}}}}var w=z.url+"?fr="+z.fr_code+"&format="+z.format+"&count="+z.count+"&intl="+z.intl+"&type="+z.type+"&src="+z.src+"&order="+z.order+"&jsonp_cb=YAHOO.util.UHScriptNodeDataSource.callbacks";this._getHotKeyword(w,z);},_getHotKeyword:function(x,w){d.Get.script(x,{onSuccess:YAHOO.util.UHScriptNodeDataSource.callbacks});YAHOO.util.UHScriptNodeDataSource.callbacks=function(z){if(z!==undefined&&z[0]!==undefined){var E=0,C=1;var y='<marquee scrollamount="2" scrolldelay="120" direction="up" height="18" behavior="slide" loop="1">'+'<ul id="search_hot_keyword_items" class="search_hot_keywork_items">'+'<li id="search_hot_keyword_title">'+w.title+"</li>";for(var G in z){if(undefined!==z[G].display_term){E+=z[G].display_term.length;if(E>w.max_charaters){break;}if(G<w.count){y+='<li class="search_hot_keyword_item">';if(d.UA.ie&&d.UA.ie<9){y+='<a href="'+z[G].link+'" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'">';}else{y+='<a href="#" onClick="setTimeout(function(){window.location.href=\''+z[G].link+'\';}, 2000)" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'" class="rapidnofollow">';}y+=z[G].display_term;y+="</a></li>";C++;}}}y+="</ul></marquee>";this.hotKeywordBlock=d.one("#search_hot_keyword_block");this.hotKeywordBlock.set("innerHTML",y);var I={ultkey1:"search hot keyword",A_pn:"search hot keyword pn",tim:"red"};var F={project_id:w.tracking_id,host:w.host,cf:{22:w.fr_code}};var D={compr_type:"deflate",debug:false,tracked_mods:{"search_hot_keyword_items":"search_hot_keyword_items"},keys:I,spaceid:w.spaceid,ywa:F,nofollow_class:["rapidnofollow","search_hot_keyword_items"]};
if(typeof(YAHOO.i13n)=="undefined"){YAHOO.i13n={};}if(typeof(YAHOO.i13n.Rapid)=="undefined"){var A="https://s.yimg.com/ss/rapid-3.12.1.js",H="https://s.yimg.com/ss/rapidworker-1.1.js";d.Get.js([A,H],function(K){if(K){console.log("get rapid js error");}else{var J=new YAHOO.i13n.Rapid(D);}});}else{var B=new YAHOO.i13n.Rapid(D);}}};},_hideCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","none");}},_showCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","inline-block");}},_setFrCode:function(w){if(w){d.one("#fr").set("value",w);}},_getFrCode:function(){return d.one("#fr").get("value");},_setVertSearchBtnContent:function(w){this.vertSearchBtn.set(s,(w["text"])?w["text"]:w);},_setVertSearchBtnPathName:function(w){this.vertSearchBtn.setAttribute("data-vsearch",w);},_trackMailSearch:function(){d.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){d.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){d.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:window.ucs._sendBeacon};d.augment(ucs.Search,d.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});ucs.YObj.use("node","ucs-search",function(b){var a=b.all("#yucs-search.yucs-search-activate");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.getFrCode=function(){return ucs.UhSearchInterface._getFrCode();};ucs.UhSearchInterface.setFrCode=function(g){ucs.UhSearchInterface._setFrCode(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface.setVertSearchBtnPathName=function(g){ucs.UhSearchInterface._setVertSearchBtnPathName(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});ucs.YObj.use("ucs-search",function(a){var b,c,d,e=window,f=document,g=a.one(".yucs-search-input")&&a.one(".yucs-search-input")._node||a.one("#UHSearchBox")&&a.one("#UHSearchBox")._node,h=function(a){try{if(c=parseInt(a.keyCode),d=a.target?a.target:a.srcElement,b=g.value.length,d===g&&0===b&&c>=32&&40>=c)g.blur();else if("EMBED"!==d.tagName&&"OBJECT"!==d.tagName&&"INPUT"!==d.tagName&&"TEXTAREA"!==d.tagName&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&(32>c||c>40)&&9!==c&&13!==c&&16!==c){if(b)if(g.setSelectionRange)g.setSelectionRange(b,b);else if(g.createTextRange){var e=g.createTextRange();e.moveStart("character",b),e.select()}g.focus()}}catch(a){}};g&&(e.addEventListener?(e.addEventListener("keydown",h,!1),g.addEventListener("keydown",h,!1)):e.attachEvent&&(f.attachEvent("onkeydown",h),g.attachEvent("onkeydown",h)))});YUI.add("jsonp-super-cached",function(a){a.namespace("jsonpsupercached"),YUI.Env.JsonpSuperCached||(YUI.Env.JsonpSuperCached={}),YUI.Env.JsonpSuperCached.services||(YUI.Env.JsonpSuperCached.services={});var b=YUI.Env.JsonpSuperCached.services;a.jsonpsupercached.getData=function(c){var d={},e=c.url||"",f=c.serviceName||"service",g=c.callbackName||"callback",h=(c.broadcast||!1,c.onSuccess||function(){});f="_"+f+"_"+g,d.timeout=c.timeout,d.onTimeout=c.onTimeout||null,d.onFailure=c.onFailure||null,d.async=!0;var i=-1===e.indexOf("?")?"?":"&",j=e+i+g+"=YUI.Env.JsonpSuperCached."+f,k=c.args||[],l=c.context||null;a.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||a.Get,b[j]||(b[j]={dataAvailable:!1,requestInProgress:!1,callbacksQueue:[]});var m=b[j];m.dataAvailable?h(m.data):(m.callbacksQueue.push(h),m.requestInProgress||(YUI.Env.JsonpSuperCached[f]=function(a){m.data=a,m.dataAvailable=!0;for(var b=m.callbacksQueue,c=0,d=b.length;d>c;c++){var e=b.pop();e.apply(l,[a].concat(k))}},m.requestInProgress=!0,a.jsonpsupercached.get.script(j,d)))}},"0.0.1");YUI.add("ucs-avatar",function(a){var b="https://s.yimg.com/dh/ap/social/profile/profile_b32.png";a.namespace("ucs"),a.ucs.Avatar=function(a){this.container=a,this.crumb=this.container.getAttribute("data-crumb"),this.guid=this.container.getAttribute("data-guid"),this.profile=this.container.getAttribute("data-prof"),this.username=this.container.getAttribute("data-user"),this.init()},a.ucs.Avatar.prototype={init:function(){this.container.removeClass("yucs-av-activate"),this.img=a.Node.create('<img width="28" height="28" alt="'+this.username+" "+this.profile+'">'),this._fetchData()},_fetchData:function(){var b='select imageUrl from social.profile.image where guid = "'+this.guid+'" and size="32x32" and imgssl=1;',c="https://ucs.query.yahoo.com/v1/console/yql?"+a.QueryString.stringify({q:b,format:"json",crumb:this.crumb,_maxage:900});a.jsonpsupercached.getData({url:c,serviceName:"avatar",onSuccess:a.bind(this._buildMarkup,this)})},_buildMarkup:function(a){var c;a.query&&a.query.results&&"0"!==a.query.results&&a.query.results.image&&!a.query.results.image.imageUrl.match(/profile_/)?(c=a.query.results.image.imageUrl,"https:"===window.location.protocol&&(c=c.replace(/^http:\/\/l\.yimg/,"https://s.yimg"),c=c.replace(/^http:\/\/socialprofiles\.zenfs/,"https://socialprofiles.zenfs"))):c=b,this.img.on("load",function(){this.img.addClass("yucs-avatar"),this.container.setContent(this.img)},this),this.img.setAttribute("src",c)}}},"1.0",{requires:["node","event","jsonp-super-cached","querystring-stringify"]}),function(){ucs.YObj.use("node","ucs-avatar",function(a){var b,c=a.one("#yucs").one("span.yucs-avatar.yucs-av-activate");c&&(b=new a.ucs.Avatar(c))})}();YUI.add("ucs-mailcount-v2",function(a){a.namespace("ucs");var b="https://s.yimg.com/kx/yucs/uh3/mail-link/96/js/mail_preview_ssl-min.js";a.ucs.MailCount=function(a){this.mailcount=a,this.mailPreview=null,this.init()},a.ucs.MailCount.prototype={init:function(){this.property=a.one("#yucs").getAttribute("data-property"),this.crumb=this.mailcount.getAttribute("data-mc-crumb"),this.maxCountDisplay="99+",this.mailUrl=this._getMailCountURI(),this.count=0,this.mailCountTimer=null,this.mouseMoveHandle=null,this.keypressHandle=null,this.pollingDurationTimer=null,this.pollingDuration=6e5,this.mailCountPollingInterval=12e4,a.UA.ie?(a.one("document").on("focus",this._handleWindowFocus,this),a.one("document").on("blur",this._handleCancelMailCountFetch,this)):(a.one("window").on("focus",this._handleWindowFocus,this),a.one("window").on("blur",this._handleCancelMailCountFetch,this)),this._initPollingTimer(),window.top===window.self&&"signedout"!==this.mailcount.getAttribute("data-authstate")&&"https"!==document.location.protocol&&(location.href.match(/ucs_mail_preview_popupsignin=1/)?this._loadMailPreviewScript():(this.mailcount.get("parentNode").once("yucs-mailcount|mouseenter",this._loadMailPreviewScript,this),this.mailcount.get("parentNode").once("yucs-mailcount|focus",this._loadMailPreviewScript,this))),this._getMailCount(),this.mailcount.removeClass("yucs-activate")},_getMailCountURI:function(){var b=this.mailcount,c="https",d=b.getAttribute("data-uri-path"),e=a.QueryString.stringify({wssid:this.crumb,appid:"UnivHeader"}),f=null;return f=c+"://"+d+"?"+e+"&callback={callback}"},_processMailCount:function(a){if(a.newmailcount){var b=parseInt(a.newmailcount,10);this.count=b,this.mailPreview&&this.mailPreview.setMailCount(this.count),b>0?(this.mailcount.get("parentNode").addClass(b>9?"yucs-lgnewmail":"yucs-newmail"),b>99&&(b=this.maxCountDisplay),this.mailcount.one(".yucs-alert-count").set("innerHTML",b),this.mailcount.removeClass("yucs-hide")):(this.mailcount.addClass("yucs-hide"),this.mailcount.get("parentNode").removeClass("yucs-newmail"),this.mailcount.get("parentNode").removeClass("yucs-lgnewmail"))}},_sendMailCountRequest:function(b,c,d){this.mailCountTimer=a.later(c,this,function(){this._service=new a.JSONPRequest(b+"&ymreqid:"+window.ucs.ymreqid(),{on:{success:a.bind(this._processMailCount,this),timeout:function(){a.log("[ERROR] Fail to send mail count request.")}},timeout:3e3,end:this.requestInProgress=!1}),this._service.send()},null,d)},_getMailCount:function(){this._sendMailCountRequest(this.mailUrl,500,!1),this._sendMailCountRequest(this.mailUrl,this.mailCountPollingInterval,!0)},_initPollingTimer:function(){this.pollingDurationTimer=a.later(this.pollingDuration,this,this._cancelMailCountFetch,null,!1),this.mouseMoveHandle&&this.mouseMoveHandle.detach(),this.keyPressHandle&&this.keyPressHandle.detach()},_handleWindowFocus:function(){this.mailCountTimer&&this.mailCountTimer.cancel(),this.pollingDurationTimer&&(this.pollingDurationTimer.cancel(),this._initPollingTimer()),this._getMailCount()},_cancelMailCountFetch:function(b){b||(this.mouseMoveHandle=a.one("window").on("mousemove",this._handleWindowFocus,this),this.keyPressHandle=a.one("window").on("keypress",this._handleWindowFocus,this)),this.mailCountTimer&&this.mailCountTimer.cancel()},_loadMailPreviewScript:function(c){c&&c.preventDefault(),this.mailcount.get("parentNode").detach("yucs-mailcount|*");var d=c?c.currentTarget:this.mailcount.get("parentNode"),e=this.count,f=c&&"focus"===c.type?!0:!1,g=this,h=document.getElementById("yucs"),i=h&&"mobile"===h.getAttribute("data-property"),j=i?a:ucs.YObj,k={onSuccess:a.bind(function(){j.use("ucs-mail-preview",function(a){g.mailPreview=new a.ucs.MailPreview({mailLink:d,mailCount:e}),g.mailPreview._accessShowMenu(),f&&(g.mailPreview._hideMenu(),g.mailcount.get("parentNode").focus())})},this)};a.one(".yucs-mail-preview-panel")&&a.Get.script(b,k)}}},"1.0",{requires:["node","event","jsonp","event-mouseenter","querystring-stringify"]}),function(){ucs.YObj.use("node","ucs-mailcount-v2",function(a){var b,c=a.one("#yucs").one("span.yucs-activate.yucs-mail-count");c&&"signedout"!==c.getAttribute("data-authstate")&&(b=new a.ucs.MailCount(c))}),window.opener&&window.location.href.match(/ucs_mail_preview_popupsignin=1/)&&(window.opener.location=window.location,window.close())}();YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a target="{target}" {actionData} href="{url}" {disabledAria}>{icon}{menuText}</a></div></li>{separatorBottom}',i='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>{icon}{menuText}</a></div></li>{separatorBottom}',j='<span class="yucs-separator" role="presentation"></span>',k="http://l.yimg.com/a/lib/ush/icon.gif",l="https://s.yimg.com/lq/lib/ush/icon.gif",m=YUI.namespace("YHELP.config"),n=a.one("#yucs-meta");n&&(m.locale=n.getData("languagetag"),m.product=n.getData("property"),n.getData("firstname")&&(m.user=n.getData("firstname"))),m.alignNode=a.one("#yucs"),a.ucs.HelpMenu=function(b){this.menuContainer=b.ancestor("div"),this.shown=!1,this.helpLink=a.one("#yucs-help_button"),this.helpLink.setAttribute("data-mad","true"),this.previewPanel=a.one("#yucs-help_inner"),this.ylt=this.previewPanel.getAttribute("data-yltmenushown"),this.PANEL_OFFSET=30,this.PANEL_OFFSET_Y=3,this.headerNode=a.one("#yucs"),a.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]),this._initCustomEvents(),b.removeClass("yucs-hm-activate")},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"}),a.one("#yhelp-link")&&a.one("#yhelp-link").on("click",function(a){YUI.YHELP.config.uhClickEvent=a,YUI.YHELP.initiate()})},_showMenu:function(d){this.previewPanel.hasClass("yucs-hide")&&this._sendBeacon(),a.ucs.HelpMenu.superclass._showMenu.apply(this,arguments),"mail"===a.one("#yucs").getAttribute("data-property")&&this.menu.all("li").addClass("yucs-hide"),d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.shown===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.shown===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems()),this._setPosition()},_showDebugMenuItems:function(){this.shown=!0,this.menu.all("li").addClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","none"),this.menu.all("li.debug-item").removeClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","block")},_showMenuItems:function(){this.shown=!0,this.menu.all("li").removeClass("yucs-hide"),this.menu.all("span.minty-item").setStyle("display","block"),this.menu.all("li.debug-item").addClass("yucs-hide"),this.menu.all("span.debug-item").setStyle("display","none"),this._destructAria(),this._initAria()},_setPosition:function(){this.mailIcon=a.one("#yucs-help_button");var b,c=this.previewPanel.one(".yucs-dock"),d=c&&c.get("offsetWidth"),e=this.headerNode.get("offsetHeight");this.rtl?this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET)):a.one("#yucs-country")||this.previewPanel.setX(Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2)),this.panel.setY(a.one("#search_hot_keyword_block")?this.headerNode.getY()+e-this.PANEL_OFFSET_Y-30:e>0?this.headerNode.getY()+e-this.PANEL_OFFSET_Y:this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3),c&&(b=this.mailIcon.get("offsetWidth")/2-d/2,c.setX(this.mailIcon.getX()+b))},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one("a")&&(this._showMenu(a),this.panel.one("a").focus()),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";b.menuGroups&&b.menuGroups.length&&(d=b.menuGroups,e=this.menu.one("#yuhead-help-panel"),b.reset&&e&&e.all("."+g).remove(!0),this._addMenuGroups(d,f,!1,g),this._showMenuItems())},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.one("#yuhead-help-panel"),b.reset&&d&&d.all(".minty-debug-item").remove(!0),this._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems())},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("li");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}},_addMenuGroups:function(a,b,c,d){var e,f,g,h=this.menu.one("#yuhead-help-panel"),i="",j=a.length;for(e=h.hasChildNodes(),f=0;j>f;f++)g=a[f].length,"bottom"===b?f>0&&(a[f][0].separatorTop=!0):(j-1>f||e)&&(a[f][g-1].separatorBottom=!0),i+=this._addMenuGroup(a[f],c,d);h.ancestor("div.yucs-yql_loading")&&h.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading"),"bottom"===b?h.append(i):h.prepend(i),h.one(".yucs-keepatbottom")&&h.all(".yucs-keepatbottom").each(function(a){h.append(a)})},_addMenuGroup:function(a,b,c){var d,e="",f=a.length;for(d=0;f>d;d++)b?(a[d].isDebugItem=!0,a[d].menuClass=c+" debug-item"):(a[d].isDebugItem=!1,a[d].menuClass=c+" minty-item"),e+=this._addMenuItem(a[d],c);return e},_addMenuItem:function(b,c){var d="";switch(b.checkedAria=b.isActive?'aria-checked="true"':"",b.disabledAria=b.isDisabled?'aria-disabled="true"':"",b.actionType){case"link":d=a.substitute(h,b,this._processTemplateValue);break;case"customEvent":d=a.substitute(i,b,this._processTemplateValue)}return d&&(d=b.isDebugItem?d.replace(/separator/,"separator debug-item "+c):d.replace(/separator/,"separator minty-item "+c)),d},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",f="https:"===document.location.protocol?l:k;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+f+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+f+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+f+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+f+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+f+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=j);break;case"separatorBottom":c&&(e=j);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e},_sendBeacon:function(){this.ylt&&window.ucs._sendBeacon(this.ylt+"?t="+Math.random())}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs").all(".yucs-hm-activate");c.each(function(c){b=new a.ucs.HelpMenu(c)})})}();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-rapid",function(a){"use strict";a.namespace("ucs");var b="ucs-rapid:",c=b+"click",d=b+"event",e=b+"destroy-instance",f=b+"addmodules",g=b+"removemodules",h=b+"refreshmodules",i=null;a.ucs.Rapid=function(a,b,c){this.container=a,b&&(this.rapidConfig=b,this.tracked_mods=c,this._init())},a.ucs.Rapid.prototype={_init:function(){var a=window;i||a.YAHOO&&a.YAHOO.i13n&&a.YAHOO.i13n.Rapid&&(i=new a.YAHOO.i13n.Rapid(this.rapidConfig)),i&&(i.addModules(this.tracked_mods),this._publish())},_publish:function(){a.Global.on(c,this._handleBeaconing,this,"click"),a.Global.on(d,this._handleBeaconing,this,"event"),a.Global.on(e,this._handleDestroyInstance,this),a.Global.on(f,this.addModules,this),a.Global.on(g,this.removeModule,this),a.Global.on(h,this.refreshModule,this)},getUHRapidInstance:function(){return i},_handleBeaconing:function(b,c){if(!b)return void a.log("data is absent.");if(!i)return void a.log("uhRapidInstance is absent.");if(b.keys||(a.log("no data keys. setting it to empty"),b.keys={}),b.outcome||a.log("no outcome. setting it to null"),"click"===c)b.sec||(a.log("SEC is absent. Using default sec."),b.sec="uh-d"),b.slk||(a.log("SLK is absent. Using default slk."),b.slk="hd"),b._pValue||(a.log("_pValue is absent. Using default _pValue."),b._pValue=0),this.beaconClick(b.sec,b.slk,b._pValue,b.keys,b.outcome);else{if(!b.eventName)return void a.log("event Name is absent.");this.beaconEvent(b.eventName,b.keys,b.outcome)}},beaconClick:function(b,c,d,e,f){i?i.beaconClick(b,c,d,e,f):a.log("no rapid instance available. cant fire beacon click.")},beaconEvent:function(b,c,d){i?i.beaconEvent(b,c,d):a.log("no rapid instance available. cant fire beacon event.")},addModules:function(b,c,d){c=!1,i?this.isModuleTracked(b)?a.log("module is already tracked"):i.addModules(b,c,d):a.log("no rapid instance available. cant add module.")},removeModule:function(b){i?i.removeModule(b):a.log("no rapid instance available. cant remove module.")},refreshModule:function(b,c,d,e){c=!1,i?this.isModuleTracked(b)?i.refreshModule(b,c,d,e):a.log("module is not tracked, we cant do a refreshModule"):a.log("no rapid instance available.")},isModuleTracked:function(b){return i?i.isModuleTracked(b):void a.log("no rapid instance available. dont know if module is present.")},_handleDestroyInstance:function(){i?(this.rapidConfig={},i.destroy(),i=null):a.log("no rapid instance available. cant destroy instance.")}}},"0.1",{requires:["array-extras","event-custom","node"]}),function(){"use strict";window.ucs.YObj.use("node","ucs-rapid",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=window,o=a.one(".yucs"),p=a.one("#yucs-meta"),q=a.all("[data-uh-test]"),r="standard",s=n.YAHOO&&n.YAHOO.i13n||null,t={},u={};return o?(b=o.getAttribute("data-spaceid"),c=o.getAttribute("data-property"),d=o.getAttribute("data-device"),k="true"===o.getAttribute("data-stencil"),d&&(i=!!d.match(/smartphone/gi),j=!!d.match(/tablet/gi)),p&&(e=p.getAttribute("data-test_id"),f=p.getAttribute("data-languagetag"),g=p.getAttribute("data-forcecobrand"),h=p.getAttribute("data-cobrand"),l=p.getAttribute("data-headercollapse")),g&&"standard"!==g?r=g:h&&"standard"!==h&&(r=h),s&&("undefined"!=typeof s.SPACEID&&(b=s.SPACEID),"undefined"!=typeof s.WEBWORKER_FILE&&(m=s.WEBWORKER_FILE)),b||(b="1197757397"),void(n.ucs.rapid||(u={spaceid:b,keys:{site:c,ver:"uh3s",psp:r,lang:f,uh_test:""},apv:!1,client_only:0,pageview_on_init:!1,rapid_noclick_resp:"uh-ignore-rapid"},s&&"undefined"!=typeof s.TEST_ID?u.test_id=s.TEST_ID:e&&(u.test_id=e),!q.isEmpty()&&u&&u.keys&&(u.keys.uh_test=a.Array.map(q.getDOMNodes(),function(a){return a.getAttribute("data-uh-test")}).join()),i?t=k?{NavMenu:"uh-m",MobileUH:"uh-m",SubMenuCountries:"uh-m","searchbox-mojit":"uh-m"}:"frontpage"===c&&"att"===g?{yucs:"uh-m","yucs-sidebar":"uh-m","yucs-search":"uh-m"}:{yucs:"uh-m","yucs-sidebar":"uh-m"}:j?t=k?{NavMenu:"uh-t",MobileUH:"uh-t",SubMenuCountries:"uh-t"}:{yucs:"uh-t","yucs-sidebar":"uh-t"}:k&&(t={masterNav:"uh-d",uhWrapper:"uh-d"}),"answers"===c&&(m||(m="/static/js/rapidworker-1.0.js"),u.webworker_file=m),l&&(u.keys.state="initial"),"groups"===c&&(m||(m="/js/rapid_worker.js"),u.webworker_file=m),("news"===c||"sports"===c||"finance"===c||"music"===c||"tv"===c||"weather"===c||"celebrity"===c||"homes"===c)&&(m||(m="/__rapid-worker-1.1.js"),u.webworker_file=m),c.match(/mag_/gi)&&(m||(m="/lib/metro/g/uicontrib/rapid_worker_1.1.1.js"),u.webworker_file=m),"frontpage"===c&&(u.ywa={project_id:0x918ba1d9327,host:"y.analytics.yahoo.com"}),n.ucs.rapid=new a.ucs.Rapid(o,u,t)))):void a.log("UH is absent")})}();YUI.add("gallery-event-pasted",function(a){function b(b,c){var d=c&&a.one(c).get("tagName")||"div",e=document.createElement(d),f=0===b.indexOf("on")?b:"on"+b,g=f in e;return g||(e.setAttribute(f,""),g=a.Lang.isFunction(e[f])),g&&!a.Node.DOM_EVENTS[f.substr(2)]&&(a.Node.DOM_EVENTS[f.substr(2)]=1),g}a.Event.define("pasted",{on:function(c,d,e){var f,g,h,i,j,k=d.args&&d.args[0],l=c.test("input[type=text],input[type=password],textarea")?"value":"text",m=a.guid(),n=function(a,b){k&&a===b||e.fire({prevVal:a,newVal:b})};b("paste",c)?c.on(m+"|paste",function(b){f=this.get(l),a.later(0,null,function(){g=b.target.get(l),n(f,g)})}):b("input",c)&&(i=50,j=function(a){"keypress"===a.type&&a.ctrlKey||(h={sel:this.get("selectionEnd")-this.get("selectionStart"),val:this.get(l),mtime:+new Date})},c.on(m+"|keypress",j),c.on(m+"|select",j),c.on(m+"|input",function(a){f=h?h.val:"",g=this.get(l),h&&g.length===f.length-h.sel||(!h||+new Date-h.mtime>i)&&n(f,g),j.call(this,a)}),d._state=h),d._evtGroup=m},detach:function(a,b){a.detachAll(b._evtGroup+"|*")}})},"gallery-2010.08.11-20-39",{requires:["event-synthetic"]}),YUI.add("input-mask",function(a){"use strict";var b,c,d,e={srcNode:".phone-number-input",mask:"+1(   )   -    ",maskLetter:" "},f=function(a){var b,d;return void 0!==a.get("selectionStart")?(b=a.get("selectionStart"),d=a.get("selectionEnd")):document.selection&&(a.focus(),c=document.selection.createRange(),b=-c.duplicate().moveStart("character",-a.get("value").length),d=b+c.text.length),{start:b,end:d}},g=function(a,c){b=a.getDOMNode(),b.setSelectionRange?(b.focus(),b.setSelectionRange(c.start,c.end)):b.createTextRange&&(d=b.createTextRange(),d.collapse(!0),d.moveEnd("character",c.end),d.moveStart("character",c.start),d.select())};a.InputMask=function(b){this.config={},this.config.srcNode=b.srcNode||e.srcNode,this.mask=b.mask||e.mask,this.maskLetter=b.maskLetter||e.maskLetter,this.firstMaskPos=this.mask.indexOf(this.maskLetter),this.lastMaskPos=this.mask.lastIndexOf(this.maskLetter)+1,this.notInputPos=[],this.maskPhoneLength=this.mask.match(new RegExp(this.maskLetter,"g")).length,this.input=a.one(this.config.srcNode);for(var c=this.mask,d=c.search(new RegExp("[^"+this.maskLetter+"]")),f=0;d>-1;)this.notInputPos.push(d+f),f+=d+1,c=c.substr(d+1),d=c.search(new RegExp("[^"+this.maskLetter+"]"))},a.InputMask.prototype={setCaret:function(a){var b=this.input,c=b.get("value");return!(c.charAt(a.end)>="0"&&c.charAt(a.end)<="9")&&c.charAt(a.end)!==this.maskLetter&&a.end<this.mask.length||a.start<this.firstMaskPos?void this.setCaret(a.start===a.end?{start:a.start+1,end:a.end+1}:{start:a.start,end:a.end+1}):void g(b,a)},getCaret:function(){return f(this.input)},caretLeft:function(a,b){var c=b.start,d=b.end;return b=d<=this.firstMaskPos?{start:this.firstMaskPos,end:this.firstMaskPos}:c<=this.firstMaskPos&&d>this.firstMaskPos?{start:this.firstMaskPos,end:this.firstMaskPos}:")"===a.charAt(c-1)||"-"===a.charAt(c-1)?{start:c-2,end:c-2}:{start:c-1,end:c-1},this.setCaret(b),b},setValue:function(a,b){for(var c,d,e,f=a.substr(this.firstMaskPos).replace(new RegExp("[^0-9"+this.maskLetter+" ]","g"),"");f.length<this.maskPhoneLength+1;)f=f.concat(this.maskLetter);for(f=f.substr(0,this.maskPhoneLength),c=this.mask,d=0,e=0;d<c.length;++d)c.charAt(d)===this.maskLetter&&(c=c.substring(0,d)+f.charAt(e)+c.substr(d+1),e++);this.input.set("value",c),this.setCaret(b)},getPhoneNumberOnly:function(){var a=this.input.get("value");return a.replace(/[^0-9]/g,"")},render:function(){var a=this,b=this.input,c={onFocus:function(){b.get("value")||a.setValue(a.mask,{start:a.firstMaskPos,end:a.firstMaskPos})},onPaste:function(){var c,d=b.get("value"),e=a.getCaret(),f=d.substr(a.firstMaskPos).replace(/[^0-9]/g,""),g=f.length,h=0;for(c=0;c<a.notInputPos.length;++c)a.notInputPos[c]>a.firstMaskPos&&a.notInputPos[c]-a.firstMaskPos<g+h&&h++;e.start=g+h+a.firstMaskPos,e.end=e.start,a.setValue(d,e)},afterClick:function(){var c=b.get("value");c&&c!==a.mask||a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos})},onKeyDown:function(c){{var d="",e=a.getCaret(),f=e.start,g=e.end,h=b.get("value"),i=c.keyCode;String.fromCharCode(i)}9!==c.keyCode&&(c.preventDefault(),8===i||46===i?(e=a.caretLeft(h,e),d=h.substring(0,e.start)+h.substr(e.start+1),a.setValue(d,e)):37===i?c.shiftKey&&f>a.firstMaskPos?a.setCaret({start:f-1,end:g}):c.metaKey?a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos}):f>a.firstMaskPos?a.caretLeft(h,{start:f,end:f}):a.setCaret({start:a.firstMaskPos,end:a.firstMaskPos}):39===i&&a.setCaret(c.shiftKey?{start:e.start,end:e.end+1}:c.metaKey?{start:a.lastMaskPos,end:a.lastMaskPos}:g<a.lastMaskPos?{start:g+1,end:g+1}:{start:a.lastMaskPos,end:a.lastMaskPos}))},onKeyPress:function(c){var d="",e=a.getCaret(),f=e.start,g=e.end,h=b.get("value"),i=c.charCode||c.keyCode,j=String.fromCharCode(i);c.altKey||c.ctrlKey||c.metaKey||(c.preventDefault(),i>=48&&57>=i&&(d=h.substring(0,f)+j+h.substr(g),a.setValue(d,{start:f+1,end:f+1})))}};navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||(b.on("valuechange",c.onValueChange),b.on("keydown",c.onKeyDown),b.on("keyup",c.onKeyPress),b.on("focus",c.onFocus),b.on("pasted",c.onPaste),b.after("click",c.afterClick))}}},"0.0.1",{requires:["event-valuechange","event-base-ie","gallery-event-pasted","event-focus"]});if("undefined"==typeof YAHOO||!YAHOO)var YAHOO={};"undefined"!=typeof YAHOO.UCS&&YAHOO.UCS||(YAHOO.UCS={}),YAHOO.UCS.Get_The_App_Promo=function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=!1,u="",v="",w=!1,x=document.getElementById("yucs")||document.getElementById("UH"),y=null,z=null,A=document.getElementById("yucs_gta"),B=!1,C="Microsoft Internet Explorer"===navigator.appName,D=function(a,b){YUI().use("node",function(c){c.Global.fire(a,b)})},E=function(a){var b=0,c=a.style;return b=C?parseFloat(c.filter.substring(14))/100:parseFloat(c.opacity)},F=function(a,b){var c=a.style;C?(c.opacity=b,c.filter="alpha(opacity="+100*b+")"):c.opacity=b},G=function(){var a=document,b=a.body,c=a.documentElement;return Math.max(Math.max(b.scrollHeight,c.scrollHeight),Math.max(b.offsetHeight,c.offsetHeight),Math.max(b.clientHeight,c.clientHeight))},H=function(){var a=460;return document.body&&document.body.offsetWidth&&(a=document.body.offsetHeight),"CSS1Compat"===document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(a=window.innerHeight),a},I=function(a,b){return a&&b?(u=a,v=b,!0):!1},J=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},K=function(){for(var a=document.createElement("div"),b=["O","Moz","ms"],c=b.length;c--;)if(b[c]+"Transition"in a.style)return o=b[c],!0;return!1}(),L=function(a){var b=a.style;C?b.filter="alpha(opacity=0)":b.opacity=0},M=function(){a.style.display="none",k.style.display="none",b.style.display="none",X()},N=function(){x.className=x.className.replace(new RegExp("\\b"+l+"\\b"),""),w=!0,a.className="uh-dmos-overlay",b.style.height="0px",null!==p&&(p.style.display="none"),K?d.className="uh-dmos-msgbox uh-dmos-hide-anim":s=setInterval(function(){var a=E(d)-.1;F(d,a),"0.1"===E(d).toFixed(1)&&(clearInterval(s),M())},56),document.getElementById("uh-dmos-imagebg").style.display="block",document.getElementById("uh-dmos-bd").style.display="block",document.getElementById("uh-dmos-success-message").style.display="none",document.getElementById("input-id-phoneNumber").value="",document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"},O=function(){y&&y.beaconClick?t?y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}):y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"}):(z=t?{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"close",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),N()},P=function(){y&&y.beaconClick?t?y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}):y.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}):(z=t?{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"close",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),N()},Q=function(){y&&y.beaconClick?t?y.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z))},R=function(){y&&y.beaconClick?t?y.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z))},S=function(){J(e,"click",O),g&&J(g,"click",P),h&&J(h,"click",Q),i&&J(i,"click",R),d.className="uh-dmos-msgbox",c.className="uh-dmos-show",Y(),K?d.className="uh-dmos-msgbox uh-dmos-msgbox-show-anim":(L(d),r=setInterval(function(){var a=E(d)+.1;F(d,a),a>=1&&clearInterval(r)},56))},T=function(){a.style.display="block",k.style.display="block",b.style.display="block",b.style.height=H()+"px",a.style.height=G()+"px",a.style.left="0px",a.style.top="0px",a.style.bottom="0px",a.style.visibility="visible",K?(d.className="uh-dmos-msgbox",a.className="uh-dmos-overlay uh-dmos-overlay-show-anim"):(L(a),q=setInterval(function(){var b=E(a)+.2;F(a,b),b>=.8&&(S(),clearInterval(q))},56))},U=function(){var a=document.getElementById("input-id-phoneNumber").value,b=/^(\+1| )?\(?\d{3}\)? ?? ?\d{3} ?\-? ?\d{4}$/;return b.test(a)?1:b.test(a)||"+1(   )   -    "!==a?b.test(a)||""===a?!1:-2:!1},V=function(){w&&(X(),M()),w=!1},W=function(){var b={O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"transitionend"};X(),B=b[o],window.addEventListener&&(a.addEventListener(B,S,!1),d.addEventListener(B,V,!1))},X=function(){window.addEventListener&&(a.removeEventListener(B,S,!1),d.removeEventListener(B,V,!1))},Y=function(){b.style.height=H()+"px",a.style.height=G()+"px",k.style.left="50%",k.style.marginLeft=-k.offsetWidth/2+"px"},Z=function(){b=document.getElementById("uh-dmos-wrapper"),a=document.getElementById("uh-dmos-overlay"),c=document.getElementById("uh-dmos-container"),d=document.getElementById("uh-dmos-msgbox"),e=document.getElementById("uh-dmos-msgbox-close-btn"),f=document.getElementById("input-id-phoneNumber"),k=document.getElementById("uh-dmos-container"),j=document.getElementById("uh-dmos-subscribe"),g=document.getElementById("uh-dmos-successBtn"),h=document.getElementById("apple-link"),i=document.getElementById("android-link")};return{_enableSubscribe:function(a){var b=(document.getElementById("input-id-phoneNumber").value.replace(/\D/g,""),"sbmt");return 1===a?(document.getElementById("uh-dmos-imagebg").style.display="none",document.getElementById("uh-dmos-bd").style.display="none",document.getElementById("uh-dmos-success-message").style.display="block",b+=" p-y",y&&y.beaconClick?t?y.beaconClick("signup",b,"",{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"},"sbmt"):y.beaconClick("signup",b,"",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"},"sbmt"):(z=t?{sec:"signup",slk:b,_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",t4:u,t5:v,elm:"btn",itc:1,cat:"gtaa"}}:{sec:"signup",slk:"cnfrm-pop",_pValue:"",keys:{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}},D("ucs-rapid:click",z)),y&&y.beaconEvent?t?y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",t4:u,t5:v,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}):y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}):(z=t?{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"confirm",t4:u,t5:v,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}}:{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}},D("ucs-rapid:event",z)),!0):(-1===a?(document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"):-2===a?(document.getElementById("phone-prompt").style.display="block",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="none"):(document.getElementById("phone-prompt").style.display="none",document.getElementById("uh-dmos-text-disclaimer").style.display="block",document.getElementById("phone-or-email-prompt").style.display="block"),!1)},enableSubscribe:function(){var a=U();this._enableSubscribe(a)},checkFields:function(){var a=U();return 1===a?!0:(this._enableSubscribe(a),!1)},submitForm:function(){var a;if(YAHOO.UCS.Get_The_App_Promo.checkFields()){a=document.getElementById("input-id-phoneNumber").value.replace(/\D/g,"");var b=x.getAttribute("data-property");window.ucs.YObj.use("jsonp","node",function(c){var d="https://ucs.netsvs.yahoo.com/json/gtaa/index.php?phoneNumber="+encodeURIComponent(a)+"&wssid="+encodeURIComponent(c.one("#uh-dmos-subscribe").getAttribute("data-crumb"))+"&appid="+encodeURIComponent(l)+"&button_revision="+encodeURIComponent(m)+"&modal_revision="+encodeURIComponent(n)+"&property="+encodeURIComponent(b)+"&format=json&callback={callback}";c.jsonp(d,{on:{success:function(a){a&&a.result&&YAHOO.UCS.Get_The_App_Promo._enableSubscribe(a.result)},failure:function(){}}})})}},displayModalPopup:function(){y&&y.beaconClick?t?y.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}):y.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}):(z=t?{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",t4:u,t5:v,elm:"btn",cat:"gtaa"}}:{sec:"signup",slk:"gta-btn",_pValue:"",keys:{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}},D("ucs-rapid:click",z)),y&&y.beaconEvent?t?y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",t4:u,t5:v,sec:"signup",slk:"signup-pop",cat:"gtaa"}):y.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"}):(z=t?{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"signup",t4:u,t5:v,sec:"signup",slk:"signup-pop",cat:"gtaa"}}:{eventName:"secvw",keys:{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"}},D("ucs-rapid:event",z)),null===b&&(Z(),window.ucs||(window.ucs={}),window.ucs.YObj||document.getElementById("yUnivHead")&&document.getElementById("yUnivHead").getAttribute("data-property")&&(window.ucs.YObj=function(){var a=document.getElementById("yUnivHead");return"undefined"!=typeof window.Y&&a&&"srp"===a.getAttribute("data-property")?window.Y:YUI()}()),window.ucs.YObj.use("node","event","input-mask","base-ie","gallery-event-pasted","jsonp","json-parse",function(a){var b=new a.InputMask({srcNode:null,mask:null});b.render(),a.on("click",YAHOO.UCS.Get_The_App_Promo.submitForm,"#uh-dmos-subscribe"),a.on("keyup",function(a){var b=YAHOO.UCS.Get_The_App_Promo,c=a.target.get("id"),d="input-id-phoneNumber"===c||"uh-dmos-subscribe"===c;13===a.keyCode&&d&&b.submitForm(a)},".uh-dmos-msgbox-canvas")})),W(),T(),J(window,"resize",Y)},fireGTAEvent:function(a,b){l=a.getAttribute("data-appid"),b.Global.fire("ucs-alert:show-overlay",{data:{id:l,name:"Get the app",type:"get_the_app",text:"Send me a link:",cnfrmText:"Thanks! A link has been sent."}})},init:function(){"undefined"!=typeof YMedia&&YMedia.rapid&&(y=YMedia.rapid);var a=A?A:null;a&&(A.style.display="block",YUI().use("node",function(b){var c=x,d=!0;d||b.all(".yucs_gta").on("click",function(d){y&&y.beaconClick?y.beaconClick("ucs-alert","alert-cta","0",{t1:"a0",t2:"ucs-alert",elm:"btn",cat:"get_the_app"}):(z={sec:"ucs-alert",slk:"alert-cta",_pValue:"0",keys:{t1:"a0",t2:"ucs-alert",elm:"btn",cat:"get_the_app"}},D("ucs-rapid:click",z)),d.halt(!0),l=a.getAttribute("data-appid"),m=a.getAttribute("data-button-rev"),n=a.getAttribute("data-modal-rev"),c.className=c.className+" "+l,I(m,n)&&(t=!0),b.Global.fire("ucs-alert:show-overlay",{data:{id:l,name:"Get the app",type:"get_the_app",text:"Send me a link:",cnfrmText:"Thanks! A link has been sent."}})})}))}}}(),YAHOO.UCS.Get_The_App_Promo.init();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-uh_locdrop",function(a){"use strict";a.namespace("ucs"),a.ucs.uh_locdrop=function(b,c,d){var e=b,f=c,g="locdrop.query.yahoo.com/v1/public/yql",h={env:""},i={proto:"https",base:"://"+g+"?"},j=function(a){var b=a.query.results.locdrop,c=b.status.code,e="OK"===c?"":b.status.message;d&&d("write complete: "+c+" ("+e+")")},k=function(b){d&&d("locdropSuccess called");var c='insert into user.location.public(type, lat, lon, radius, version, crumb, app) values ("current", "'+Math.round(1e6*b.coords.latitude)/1e6+'", "'+Math.round(1e6*b.coords.longitude)/1e6+'", "'+b.coords.accuracy+'", "v4", "'+f+'", "'+e+'")';d&&d("YQL called: "+c);var g=new a.YQLRequest(c,j,h,i);g.send()},l=function(a){d&&d("locdropFail called: "+a.message)};a.ucs.inject_getlocation(k,l)},a.ucs.inject_getlocation=function(a,b){var c=window.navigator.geolocation.getCurrentPosition;return"function"==typeof c?(window.navigator.geolocation.getCurrentPosition=function(d,e,f){arguments.length?d&&d.call?c.call(window.navigator.geolocation,function(b){a.call(null,b),d.call(null,b)},function(a){b.call(null,a),e&&e.call(null,a)},f):c.call(window.navigator.geolocation,d):c.call(window.navigator.geolocation)},!0):!1}},"1.0",{requires:["yql"]}),function(){window.ucs.YObj.use("node","ucs-uh_locdrop",function(a){var b=a.one("#yucs-location-js.yucs-location-activate");if(b){b.removeClass("yucs-location-activate");var c=(b.getAttribute("data-crumb"),b.getAttribute("data-appid"));window.navigator&&window.navigator.geolocation&&document.getElementById("location-crumb")&&a.ucs.uh_locdrop(c,document.getElementById("location-crumb").value)}})}();